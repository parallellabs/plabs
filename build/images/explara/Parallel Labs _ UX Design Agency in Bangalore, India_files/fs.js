!function(){var t;!function(t){var e;t.Namespace=function(t){if(!e){var n=t._fs_loaded;e=n?n:t._fs_namespace?t._fs_namespace:"FS"}return e},t.isLoaded=function(t){return t._fs_loaded},t.setLoaded=function(t,e){t._fs_loaded=e,e in t||(t[e]={})}}(t||(t={})),function(t){t._fs_debug=function(t){return!!t._fs_ext_debug||!!t._fs_debug},t._fs_host=function(t){return t._fs_ext_host||t._fs_host},t._fs_org=function(t){return t._fs_ext_org||t._fs_org},t._fs_csp=function(t){return t._fs_csp},t._fs_ready=function(t){return t._fs_ready},t._fs_run_in_iframe=function(t){return!!t._fs_run_in_iframe},t._fs_is_outer_script=function(t){return!!t._fs_is_outer_script},t._fs_replay_flags=function(t){return t._fs_replay_flags},t._fs_transport=function(t){return t._fs_transport},t.set_fs_shutdown=function(t,e){t._fs_shutdown=e},t.FS_q_drain=function(e){if((e=e[t.Namespace(e)])&&"q"in e){var n=e.q;return delete e.q,n}return[]},t.FS_q_push=function(e,n){var i=e[t.Namespace(e)];"q"in i||(i.q=[]),i.q.push(n)}}(t||(t={})),function(t){function e(t){var e=t.document.createElement("iframe");return e.id="FS-helper",e.className="fs-hide",e.style.display="none",t.document.head.appendChild(e),e.src="about:blank",e}var n,i=!0;t.initWindex=function(o){if(!n||!i&&!o.document.head.contains(n)){n=e(o),t.windex=n.contentWindow,o.document.head.removeChild(n);try{t.windex.JSON.stringify(null)}catch(s){n=e(o),t.windex=n.contentWindow,i=!1}t.windex.Array.isArray=t.windex.Array.isArray||r,t.windex.detached=i}};var r=function(e){return"[object Array]"==t.windex.Object.prototype.toString.call(e)}}(t||(t={})),function(t){function e(t){o&&window.console&&console.log(t)}function n(e,n){var i=0;try{t.windex.JSON.stringify(e,function(t,e){if(i++>n)throw"break";return"object"!=typeof e?void 0:e})}catch(r){if("break"!=r)return!0}return!1}function i(e,n,o,a){if(1>n)return 0;var u;if(e&&e.constructor==Date?u=isNaN(e)?"Invalid Date":e.toUTCString():(u="object"==typeof Node?e instanceof Node:e&&"object"==typeof e&&0<e.nodeType&&"string"==typeof e.nodeName,u=u?r(e):void 0===e?"undefined":"object"!=typeof e||null==e?e:e instanceof Error?e.stack||e.name+": "+e.message:void 0),void 0!==u)return u=t.windex.JSON.stringify(u),void 0===u?0:('"'==u[0]&&(u=s(u,n,'..."')),u.length<=n?(a.tokens.push(u),u.length):0);if(a.catchCycles){if(a.opath.splice(o),u=a.opath.lastIndexOf(e),u>-1)return e='"'+s("<Cycle to ancestor #"+(o-u-1)+">",n-2)+'"',a.tokens.push(e),e.length;a.opath.push(e)}var c=n,h=function(t){return c>=t.length?(c-=t.length,a.tokens.push(t),!0):!1};if(u=function(t){","==a.tokens[a.tokens.length-1]?a.tokens[a.tokens.length-1]=t:h(t)},2>c)return 0;if(t.windex.Array.isArray(e)){h("[");for(var d=0;d<e.length&&c>0;d++){var l=i(e[d],c-1,o+1,a),c=c-l;if(0==l&&!h("null"))break;h(",")}u("]")}else{h("{");for(var f=Object.keys(e),d=0;d<f.length&&c>0;d++){var l=f[d],p=e[l];if(!h('"'+l+'":'))break;if(l=i(p,c-1,o+1,a),0==l){a.tokens.pop();break}c-=l,h(",")}u("}")}return 1/0==n?1:n-c}function r(t){if(t.tagName){var e=t.tagName.toLowerCase();return"<"+e+(t.attributes&&t.attributes.type?' type="'+t.attributes.type.value+'"':"")+(t.id?' id="'+t.id+'"':"")+(t.className?' class="'+t.className+'"':"")+">...</"+e+">"}return e="",t.data&&t.data.substring&&(e=" "+t.data.substring(0,50)+(50<t.data.length?"...":"")),t.nodeName+e}var o=!1;t.bind=Function.prototype.bind?function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return t.bind.apply(t,[e].concat(n))}:function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return function(){var i=Array.prototype.slice.call(arguments);t.call.apply(t,[e].concat(n,i))}},t._native_filter=function(t,e,n){return t.filter(e,n)},t._js_filter=function(t,e,n){for(var i=Array(t.length),r=0;r<t.length;r++)i[r]=e.call(n,t[r],r,t);return i},t.filter=Array.prototype.filter?t._native_filter:t._js_filter,t.$entry=function(t,e){return t&&t.apply?function(){try{return t.apply(e||this,arguments)}catch(n){}}:t},t.initDebug=function(e){o=t._fs_debug(e)},t.isDebug=function(){return o},t.logIfDebug=e,t.logFSError=function(t){},t.stringify=function(t,e,r){void 0===e&&(e=1/0),void 0===r&&(r=!0);try{var o={tokens:[],opath:[],catchCycles:r&&n(t,e/4)};return i(t,e,0,o),o.tokens.join("")}catch(s){t="Internal error: unable to determine what JSON error was";try{t=""+s,t=t.replace(/[^a-zA-Z0-9\.\:\!\, ]/g,"_")}catch(a){}return'"'+t+'"'}};var s=function(t,e,n){return void 0===n&&(n="..."),t.length<=e?t:t.length<=n.length||e<=n.length?t.substring(0,e):t.substring(0,e-n.length)+n};t.baseUri=function(t){return"baseURI"in t?t.baseURI:(t=t.getElementsByTagName("base")[0])&&t.href?t.href:location.href},t.doctypeString=function(t){if(t=t.doctype,!t)return null;var e;return e="<!DOCTYPE "+t.name,t.publicId&&(e+=' PUBLIC "'+t.publicId+'"'),t.systemId&&(e+=' "'+t.systemId+'"'),e+">"},t.parseJson=function(e){return t.windex.JSON.parse(e)},t.tryGetScreenDims=function(t){var e=0,n=0;return null==t.screen?[e,n]:(e=parseInt(String(t.screen.width)),n=parseInt(String(t.screen.height)),e=isNaN(e)?0:e,n=isNaN(n)?0:n,[e,n])};var a=function(){function t(){this._listeners=[],this._yesCapture=!0,this._noCapture=!1;try{var t=Object.defineProperty({},"passive",{get:function(){this._yesCapture={capture:!0,passive:!0},this._noCapture={capture:!1,passive:!0}}});window.addEventListener("test",null,t)}catch(e){}}return t.prototype.add=function(t,e,n,i){return n={target:t,type:e,fn:function(t){i(t)},options:n?this._yesCapture:this._noCapture,index:this._listeners.length},this._listeners.push(n),t.addEventListener(e,n.fn,n.options),n},t.prototype.remove=function(t){t.target.removeEventListener(t.type,t.fn,t.options),t.target=null,t.fn=null},t.prototype.clear=function(){for(var t=0;t<this._listeners.length;t++)this._listeners[t].target&&this.remove(this._listeners[t]);this._listeners=[]},t}();t.DomListeners=a;var u=function(){function t(t,e){this.name=t,this._native=e,this.on=!0}return t.prototype.before=function(t){return this._before=t,this},t.prototype.afterAsync=function(t){return this._afterAsync=t,this},t.prototype.afterSync=function(t){return this._afterSync=t,this},t.prototype.disable=function(){this.on=!1},t.prototype.enable=function(){this.on=!0},t.prototype.getShim=function(){return this.shim||this.setupShim(),this.shim},t.prototype.setupShim=function(){var t=this;this.shim=function(){var n={that:this,args:arguments};if(t.on)try{t._before&&t._before.call(this,n)}catch(i){e("Error in hook before "+t.name)}var r=t._native.apply(this,arguments);if(t.on)try{if(t._afterSync&&t._afterSync.call(this,n),t._afterAsync){var o=this;setTimeout(function(){try{t._afterAsync.call(o,n)}catch(i){e("Error in async hook after "+t.name)}})}}catch(s){e("Error in hook after "+t.name)}return r}},t}(),c={};t.activateHook=function(t,e){c[e]=c[e]||[];for(var n,i=0;i<c[e].length;i++)c[e][i].obj==t&&(n=c[e][i].hook);return n||(n=new u(e,t[e]),c[e].push({obj:t,hook:n}),t[e]=n.getShim()),n.enable(),n}}(t||(t={})),function(t){t.EVENT_MUT_INSERT=2,t.EVENT_MUT_REMOVE=3,t.EVENT_MUT_ATTR=4,t.EVENT_MUT_ATTR_CURVE=5,t.EVENT_MUT_TEXT=6,t.EVENT_MUT_SKIPIDS=7,t.EVENT_MOUSEMOVE=8,t.EVENT_MOUSEMOVE_CURVE=9,t.EVENT_SCROLL=10,t.EVENT_SCROLL_CURVE=11,t.EVENT_MOUSEDOWN=12,t.EVENT_MOUSEUP=13,t.EVENT_KEYDOWN=14,t.EVENT_KEYUP=15,t.EVENT_CLICK=16,t.EVENT_FOCUS=17,t.EVENT_VALUECHANGE=18,t.EVENT_RESIZE=19,t.EVENT_DOMLOADED=20,t.EVENT_LOAD=21,t.EVENT_PLACEHOLDER_SIZE=22,t.EVENT_UNLOAD=23,t.EVENT_BLUR=24,t.EVENT_SET_FRAME_BASE=25,t.EVENT_TOUCHSTART=32,t.EVENT_TOUCHEND=33,t.EVENT_TOUCHCANCEL=34,t.EVENT_TOUCHMOVE=35,t.EVENT_TOUCHMOVE_CURVE=36,t.EVENT_NAVIGATE=37,t.EVENT_PLAY=38,t.EVENT_PAUSE=39,t.EVENT_INNERWIDTH=40,t.EVENT_INNERWIDTH_CURVE=41,t.EVENT_LOG=48,t.EVENT_ERROR=49,t.EVENT_DBL_CLICK=50,t.EVENT_FORM_SUBMIT=51,t.EVENT_WINDOW_FOCUS=52,t.EVENT_WINDOW_BLUR=53,t.EVENT_HEARTBEAT=54,t.NAVIGATION_TIMING=55,t.EVENT_SYS_SETMETA=8192,t.EVENT_SYS_SETVAR=8193,t.EVENT_SYS_HIGHLIGHT=8194,t.EVENT_COOKED_LOAD="load",t.EVENT_COOKED_UNLOAD="unload",t.EVENT_COOKED_NAVIGATE="navigate",t.EVENT_COOKED_CLICK="click",t.EVENT_COOKED_TAP="tap",t.EVENT_COOKED_FOCUS="focus",t.EVENT_COOKED_CHANGE="change",t.EVENT_COOKED_MOUSE_THRASH="thrash",t.EVENT_FORM_ABANDONED="abandon",t.isUserActionEvent=function(e){switch(e){case t.EVENT_MOUSEDOWN:case t.EVENT_MOUSEMOVE:case t.EVENT_MOUSEMOVE_CURVE:case t.EVENT_MOUSEUP:case t.EVENT_KEYDOWN:case t.EVENT_KEYUP:case t.EVENT_TOUCHSTART:case t.EVENT_TOUCHEND:case t.EVENT_TOUCHMOVE:case t.EVENT_TOUCHMOVE_CURVE:case t.EVENT_TOUCHCANCEL:case t.EVENT_CLICK:case t.EVENT_SCROLL:case t.EVENT_SCROLL_CURVE:case t.EVENT_NAVIGATE:return!0}return!1},t.MAX_LOGS_PER_PAGE=1024}(t||(t={}));var e;!function(t){var e=function(){function t(){this.listeners=[]}return t.prototype.tap=function(t){this.listeners=this.listeners.slice(0),this.listeners.push(t)},t.prototype.untap=function(t){t=this.listeners.indexOf(t),-1!=t&&(this.listeners=this.listeners.slice(0),this.listeners.splice(t,1))},t.prototype.raise=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];this.listeners.forEach(function(n){n.apply(t,e)})},t}();t.Signal=e}(e||(e={})),function(t){function e(t){return new I(document.createElement(t))}function n(t,e){var n=t.style.getPropertyValue(e);return n?n:getComputedStyle(t).getPropertyValue(e)}function i(t,e,n,i){"opacity"!=e&&"number"==typeof n&&(n+="px"),t.style.setProperty(e,n,i||"")}function r(t,e){t.style.setProperty("-webkit-transform",e),t.style.setProperty("-moz-transform",e),t.style.setProperty("-ms-transform",e),t.style.setProperty("transform",e)}function o(t,e){t.style.setProperty("-webkit-animation-fill-mode",e),t.style.setProperty("-moz-animation-fill-mode",e),t.style.setProperty("-ms-animation-fill-mode",e),t.style.setProperty("animation-fill-mode",e)}function s(t,e,n){null==n?delete t[e]:t[e]=n}function a(t,e){return t.hasAttribute(e)?t.getAttribute(e):""}function u(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function c(t){return t.value}function h(t,e){t.value=e}function d(t,e,n,i){t.addEventListener(e,n,!!i)}function l(t,e,n,i){t.removeEventListener(e,n,!!i)}function f(t,e){return t.classList.contains(e)}function p(t,e){t.classList.add(e)}function _(t,e){t.classList.remove(e)}function g(t,e){t.classList.toggle(e)}function m(t,e,n){n?t.classList.add(e):t.classList.remove(e)}function v(t){var e=t.parentElement;e&&e.removeChild(t)}function y(t,e,n){(t instanceof I?t.e:t).insertBefore(e instanceof I?e.e:e,n instanceof I?n.e:n)}function E(t,e){(t instanceof I?t.e:t).appendChild(e instanceof I?e.e:e)}function b(t,e){var n=t instanceof I?t.e:t;n.insertBefore(e instanceof I?e.e:e,n.firstChild)}var I=function(){function t(t){this.e=t}return t.prototype.set=function(t){return this.e=t,this},t.prototype.selectOne=function(e){return(e=this.e.querySelector(e))?new t(e):null},t.prototype.selectMany=function(t){return new S(this.e.querySelectorAll(t))},t.prototype.focus=function(){return this.e.focus(),this},t.prototype.blur=function(){return this.e.blur(),this},t.prototype.click=function(){return this.e.click(),this},t.prototype.hasFocus=function(){return document.activeElement==this.e},t.prototype.contains=function(e){return this.e.contains(e instanceof t?e.e:e)},t.prototype.text=function(){return this.e.textContent},t.prototype.html=function(){return this.e.innerHTML},t.prototype.setHtml=function(t){return this.e.innerHTML=t,this},t.prototype.setText=function(t){return this.e.textContent=t,this},t.prototype.hasAttr=function(t){return this.e.hasAttribute(t)},t.prototype.attr=function(t){return a(this.e,t)},t.prototype.setAttr=function(t,e){return u(this.e,t,e),this},t.prototype.prop=function(t){return this.e[t]},t.prototype.setProp=function(t,e){return s(this.e,t,e),this},t.prototype.val=function(){return c(this.e)},t.prototype.setVal=function(t){return h(this.e,t),this},t.prototype.css=function(t){return n(this.e,t)},t.prototype.setCss=function(t,e,n){return i(this.e,t,e,n),this},t.prototype.setCssTransform=function(t){return r(this.e,t),this},t.prototype.setCssAnimationFillmode=function(t){return o(this.e,t),this},t.prototype.on=function(t,e,n){return d(this.e,t,e,n),this},t.prototype.off=function(t,e,n){return l(this.e,t,e,n),this},t.prototype.child=function(){var e=this.e.firstElementChild;return e?new t(e):null},t.prototype.children=function(){return new S(this.e.children)},t.prototype.parent=function(){var e=this.e.parentElement;return e?new t(e):null},t.prototype.remove=function(){return v(this.e),this},t.prototype.hasClass=function(t){return f(this.e,t)},t.prototype.setClass=function(t){return this.e.className=t,this},t.prototype.addClass=function(t){return p(this.e,t),this},t.prototype.removeClass=function(t){return _(this.e,t),this},t.prototype.toggleClass=function(t){return g(this.e,t),this},t.prototype.switchClass=function(t,e){return m(this.e,t,e),this},t.prototype.append=function(t){return E(this.e,t),this},t.prototype.insert=function(t,e){return y(this.e,t,e),this},t.prototype.appendText=function(t){return E(this.e,document.createTextNode(t)),this},t.prototype.appendTo=function(t){return E(t,this.e),this},t.prototype.prepend=function(t){return b(this.e,t),this},t.prototype.prependTo=function(t){return b(t,this.e),this},t.prototype.bounds=function(){return this.e.getBoundingClientRect()},t.prototype.elem=function(){return this.e},t.prototype.offsetWidth=function(){return this.e.offsetWidth},t.prototype.offsetHeight=function(){return this.e.offsetHeight},t.prototype.offsetTop=function(){return this.e.offsetTop},t.prototype.offsetLeft=function(){return this.e.offsetLeft},t}();t.OfOne=I;var S=function(){function t(t){if(t instanceof Array)this.e=t.map(function(t){return t instanceof I?t.e:t});else if(0<t.length||t instanceof NodeList||t instanceof HTMLCollection){this.e=[];for(var e=0,n=t.length;n>e;e++)this.e.push(t[e])}else this.e=[]}return t.prototype.selectMany=function(e){var n=new t;return this.eachQ(function(t){t.selectMany(e).e.forEach(function(t){n.push(t)})}),n},t.prototype.empty=function(){return 0==this.e.length},t.prototype.size=function(){return this.e.length},t.prototype.contains=function(t){for(var e=this.e,n=0,i=e.length;i>n;n++)if(e[n].contains(t))return!0;return!1},t.prototype.setHtml=function(t){return this.e.forEach(function(e){e.innerHTML=t}),this},t.prototype.setText=function(t){return this.e.forEach(function(e){e.textContent=t}),this},t.prototype.setAttr=function(t,e){return this.e.forEach(function(n){u(n,t,e)}),this},t.prototype.setProp=function(t,e){return this.e.forEach(function(n){s(n,t,e)}),this},t.prototype.setVal=function(t){return this.e.forEach(function(e){h(e,t)}),this},t.prototype.setCss=function(t,e,n){return this.e.forEach(function(r){i(r,t,e,n)}),this},t.prototype.setCssTransform=function(t){return this.e.forEach(function(e){r(e,t)}),this},t.prototype.on=function(t,e,n){return this.e.forEach(function(i){i&&d(i,t,e,n)}),this},t.prototype.off=function(t,e,n){return this.e.forEach(function(i){i&&l(i,t,e,n)}),this},t.prototype.remove=function(){return this.e.forEach(v),this},t.prototype.setClass=function(t){return this.e.forEach(function(e){e.className=t}),this},t.prototype.addClass=function(t){return this.e.forEach(function(e){p(e,t)}),this},t.prototype.removeClass=function(t){return this.e.forEach(function(e){_(e,t)}),this},t.prototype.toggleClass=function(t){return this.e.forEach(function(e){g(e,t)}),this},t.prototype.switchClass=function(t,e){return this.e.forEach(function(n){m(n,t,e)}),this},t.prototype.appendTo=function(t){return this.e.forEach(function(e){E(t,e)}),this},t.prototype.prependTo=function(t){return this.e.forEach(function(e){b(t,e)}),this},t.prototype.eachQ=function(t,e){return e||(e=new I),this.e.forEach(function(n,i){e.set(n),t(e,i)}),e.set(null),this},t.prototype.push=function(t){return this.e.push(t instanceof I?t.e:t),this},t.prototype.oneAt=function(t){return new I(this.e[t])},t}();t.OfMany=S,t.createOne=e,t.createMany=function(t,n){for(var i=new S;i.e.length<n;)i.push(e(t));return i},t.selectMany=function(t,e){return e=e||document,new S(e.querySelectorAll(t))},t.selectOne=function(t,e){e=e||document;var n=e.querySelector(t);return n?new I(n):null},t.body=function(){return new I(document.body)},t.head=function(){return new I(document.head)},t.html=function(t){return t.innerHTML},t.setHtml=function(t,e){t.innerHTML=e},t.text=function(t){return t.textContent},t.setText=function(t,e){t.textContent=e},t.css=n,t.setCss=i,t.setCssTransform=r,t.setCssAnimationFillmode=o,t.prop=function(t,e){return t[e]},t.setProp=s,t.hasAttr=function(t,e){return t.hasAttribute(e)},t.attr=a,t.setAttr=u,t.contains=function(t,e){return t.contains(e)},t.val=c,t.setVal=h,t.on=d,t.off=l,t.hasClass=f,t.setClass=function(t,e){t.className=e},t.addClass=p,t.removeClass=_,t.toggleClass=g,t.switchClass=m,t.remove=v,t.insert=y,t.append=E,t.prepend=b}(e||(e={}));var n;!function(t){t.CorePack=0,t.ExperiencePack=1,t.DataPack=2,t.SupportPack=3,t.PageInsightsPack=4,t.NumPacks=5,t.MarketingPartnerDiscount=1,t.AgencyPartnerDiscount=2,t.EnterpriseDealPenalty=1,t.NoReport="none",t.TextReport="text",t.HtmlReport="html",t.CsvReport="csv"}(n||(n={}));var i;!function(t){t.UserCountType=0,t.SessionCountType=1,t.EventCountType=2,t.ClickCountType=3}(i||(i={})),function(t){var e=n;t.INTERNAL_CREATOR="FullStory Helpbot",t.HIGHLIGHTS_NOTE="note",t.GEO_RECORD_ALL="",t.GEO_RECORD_WHITELIST="whitelist",t.GEO_RECORD_BLACKLIST="blacklist",t.PlanStateInvalid=0,t.PlanStateCustom=1,t.PlanStateTrial=2,t.PlanStatePaid=3,t.PlanStateFreemium=4,t.PlanStateInvoiced=5,t.PlanStateChild=6,t.PlanStateTrialExpired=7,t.PlanStateGift=8,t.planState=function(n){if(n.Custom)return t.PlanStateCustom;if(n.Invoiced)return t.PlanStateInvoiced;if(n.ParentId)return t.PlanStateChild;var i=0==n.Packs[e.CorePack],r=0==n.Packs[e.ExperiencePack];return 0==n.Price?i?r?t.PlanStateGift:t.PlanStateFreemium:n.Packs[e.CorePack]<Date.now()?t.PlanStateTrialExpired:t.PlanStateTrial:i?t.PlanStatePaid:t.PlanStateInvalid},t.getPlanStateClass=function(e){switch(e){case t.PlanStateTrial:return"trialState";case t.PlanStateTrialExpired:return"trialExpiredState";case t.PlanStatePaid:return"paidState";case t.PlanStateFreemium:return"freemiumState";case t.PlanStateGift:return"giftState";case t.PlanStateInvoiced:return"invoicedState";case t.PlanStateChild:return"childState";case t.PlanStateCustom:return"planStateCustom";case t.PlanStateInvalid:return console.log("Invalid plan editor state: "+this._planState),""}},t.ErrnoResourceAuthed=1,t.ErrnoResourceBadHost=2,t.ErrnoResourceWrongContent=3,t.ErrnoResourceGenericFailed=16,t.MonthGranularity="month",t.WeekGranularity="week",t.DayGranularity="day",t.HourGranularity="hour",t.AllClickType="active",t.DeadClickType="dead",t.ErrorClickType="error",t.RageClickType="rage",function(t){t[t.Medium=0]="Medium",t[t.Large=1]="Large"}(t.VisSize||(t.VisSize={})),t.allowedSeatCounts=[20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200]}(t||(t={})),function(t){t.Node_ELEMENT_NODE=1,t.Node_ATTRIBUTE_NODE=2,t.Node_TEXT_NODE=3,t.Node_CDATA_SECTION_NODE=4,t.Node_ENTITY_REFERENCE_NODE=5,t.Node_ENTITY_NODE=6,t.Node_PROCESSING_INSTRUCTION_NODE=7,t.Node_COMMENT_NODE=8,t.Node_DOCUMENT_NODE=9,t.Node_DOCUMENT_TYPE_NODE=10,t.Node_DOCUMENT_FRAGMENT_NODE=11,t.Node_NOTATION_NODE=12,t.XHR_UNSENT=0,t.XHR_OPENED=1,t.XHR_HEADERS_RECEIVED=2,t.XHR_LOADING=3,t.XHR_DONE=4}(t||(t={})),function(t){function e(t,e,i,r,o){var s=document.createElement("a");return n(s,t,o,r,e,i),s}function n(t,e,n,i,r,o){r&&(t.textContent=r),o&&(t.className=o),i&&t.setAttribute("title",i),t.href=e,t.onclick=function(t){0!=t.button||t.ctrlKey||t.metaKey||(t.preventDefault(),n())}}function i(t,e){return t.getFullYear()==e.getFullYear()&&t.getMonth()==e.getMonth()&&t.getDate()==e.getDate()}function r(t,e,n){for(;t.length<e;)t=n+t;return t}function o(t){var e=t.getHours();return 0==e&&(e=12),(e>12?e-12:e)+":"+r(t.getMinutes().toString(),2,"0")+" "+(12>t.getHours()?"am":"pm")}function s(t){var e=new Date;if(i(t,e))return o(t);if(e.setDate(e.getDate()-1),i(t,e))return"Yesterday, "+o(t);var n=a[t.getMonth()]+" "+t.getDate();return t.getFullYear()!=e.getFullYear()&&(n+=", "+t.getFullYear()),n+", "+o(t)}var a="January February March April May June July August September October November December".split(" "),u="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");t.SOLR_DATE_FORMAT=["YYYY-MM-DDTHH:mm:ss.SSSZ"],t.validateDateFromSolr=function(t,e){var n=moment(t,e,!0);return n.isValid()?n.toISOString():null},t.getNiceDateFromSolrDate=function(t){return t=moment(t,"YYYY-MM-DDTHH:mm:ss.SSSZ",!0),t.isValid()?0==t.hours()&&0==t.minutes()&&0==t.seconds()?t.format("M/D/YYYY"):t.format("M/D/YYYY h:mma"):null},t.parseURLParams=function(t){void 0===t&&(t=location.search.slice(1));var e={};t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].split(/=(?!=)(?!$)/);e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e},t.hashCode=function(t){for(var e=0,n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e&=e;return Math.abs(e)},t.onclick=function(t,e){t.onclick=e},t.makeAnchor=function(t,n,i,r){return e(t,n,i,"",r)},t.makeAnchorWithTitle=e,t.jsAnchorWithTitle=n,t.metaEnter=function(t,e){t.on("keydown",function(t){13==t.keyCode&&(t.ctrlKey||t.metaKey)&&(e(),t.preventDefault())})},t.autoRemove=function(t,e){void 0===e&&(e=500);var n=!0,i=0;t.on("mouseenter",function(t){n=!0,i&&(clearTimeout(i),i=0)}),t.on("mouseleave",function(r){n=!1,i||(i=setTimeout(function(){i=0,n||t.remove()},e))})},t.renderTime=function(t,e){void 0===e&&(e=!0);var n=navigator.languages;return new Date(t).toLocaleString(n&&0<n.length?n[0]:navigator.language,{hour12:e})},t.isSameDate=i,t.lpad=r,t.getPercentString=function(t,e){var n=Math.round(100*t/e);return 0==n&&t>0?"< 1%":100==n&&t!=e?"> 99%":n.toString()+"%"},t.getTimeString=o,t.monthName=function(t){return a[t.getMonth()]},t.shortMonthName=function(t){return u[t.getMonth()]},t.renderTimeNickname=function(t){return 0==t?"---":s(new Date(t))},t.renderDateNicknameNoTime=function(t){var e=new Date;if(i(t,e))return"Today";if(e.setDate(e.getDate()-1),i(t,e))return"Yesterday";var n=a[t.getMonth()]+" "+t.getDate();return t.getFullYear()!=e.getFullYear()&&(n+=", "+t.getFullYear()),n},t.renderDateNickname=s,t.renderShortDateNickname=function(t){var e=new Date;return i(t,e)?o(t):t.getFullYear()<e.getFullYear()?t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear().toString().slice(2):u[t.getMonth()]+" "+t.getDate()},t.renderMonthAndYear=function(t){return 0==t?"":(t=new Date(t),a[t.getMonth()]+" "+t.getFullYear())},t.renderNumericDate=function(t){var e=new Date;return t.getFullYear()!=e.getFullYear()?t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear().toString().slice(2):t.getMonth()+1+"/"+t.getDate()},t.getDurationNicknameFromMs=function(t){var e=Math.floor(t/1e3);if(60>e)return"0:"+r(e.toFixed(),2,"0");if(3600>e)return t=Math.floor(e/60).toString(),e=r((e%60).toFixed(),2,"0"),t+":"+e;var n=Math.floor(e/3600);return t=r(Math.floor((e-3600*n)/60).toString(),2,"0"),e=r((e%60).toFixed(),2,"0"),n.toString()+":"+t+":"+e},t.getDateInputCompatibleString=function(t){var e=t.getFullYear(),n=t.getMonth()+1,n=10>n?"0"+n:""+n;return t=10>t.getDate()?"0"+t.getDate():""+t.getDate(),e+"-"+n+"-"+t},t.dateFromDateInputVal=function(t){var e=t.split("-");t=parseInt(e[0]);var n=parseInt(e[1])-1,e=parseInt(e[2]),i=new Date;return i.setFullYear(t,n,e),i.setHours(23,59,0),i},t.longDurationString=function(t,e){if(0>t)return e;var n=t/36e5;return n>23?(n=n/24|0,1==n?"1 day":n+" days"):(n|=0,1==n?"1 hour":n+" hours")},t.toggleClass=function(t,e,n){n?t.classList.add(e):t.classList.remove(e)},t.parseCookies=function(t){if(!t)return{};var e={};return t.split("; ").forEach(function(t){var n=t.indexOf("=");0>n||(e[t.substring(0,n)]=decodeURIComponent(t.substring(n+1)))}),e},t.setLastPage=function(t,e){if(e){var n,i=e.indexOf("://")+3;n="/"==e.charAt(e.length-1)?e.slice(i,e.length-1).split("/"):e.slice(i).split("/"),i=0==e.slice(i).indexOf("www."),2<n.length?n=i?n[0].slice(4)+"/.../"+n[n.length-1]:n[0]+"/.../"+n[n.length-1]:(n=2==n.length?n[0]+"/"+n[1]:n[0],n=i?n.slice(4):n),t.setText(n),t.setAttr("title",e)}},t.walkToBody=function(t,e){for(var n=t;null!=n&&n!=document.body&&e(n);)n=n.parentNode},t.nearestElement=function(e){for(;e&&e.nodeType!=t.Node_ELEMENT_NODE;)e=e.parentNode;return e},t.startsWith=function(t,e){return e.length>t.length?!1:t.substring(0,e.length)==e},t.endsWith=function(t,e){return e.length>t.length?!1:t.substring(t.length-e.length)==e},t.createStripeTokenAndSavePayment=function(t,e,n,i){var r=window.Stripe;r?(r.setPublishableKey(e),r.createToken(t,function(t,e){n(t,e)})):i("Sorry, Stripe client did not load.  They may be having network issues.  Please refresh and try again.")},t.selectedValue=function(t){return t.children[t.selectedIndex].value},t.confirm=function(t,e,n){window.prompt(t+" \n\n To proceed, enter the text '"+e+"'.")==e?n():window.alert("No worries. Doing nothing.")},t.ensureUrlScheme=function(t){return-1==t.indexOf("//")?"http://"+t:t};var c=document.createElement("a");t.parseUrl=function(t){return c.href=t,{protocol:c.protocol,hostname:c.hostname,port:c.port,pathname:c.pathname,search:c.search,hash:c.hash}},t.numberWithCommas=function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},t.wordForSingleNumbers=function(t){switch(t){case 0:return"zero";case 1:return"one";case 2:return"two";case 3:return"three";case 4:return"four";case 5:return"five";case 6:return"six";case 7:return"seven";case 8:return"eight";case 9:return"nine";default:return String(t)}};var h={visa:"visa",amex:"amex",mastercard:"mastercard","american express":"amex",discover:"discover",diners:"diners","diners club":"diners"};t.cardType=function(t){return t=t.toLowerCase(),h[t]?h[t]:"unknown"},t.formatCardNumber=function(t){t=t.replace(/[^0-9*]/g,"").slice(0,19);for(var e="",n=0;n+4<t.length;)e+=t.substr(n,4)+" ",n+=4;return e+=t.substr(n)},t.pluralize=function(t,e){return 2>e?t:t+"s"},t.capitalize=function(t){return t[0].toLocaleUpperCase()+t.substring(1)},t.userErrorMessage=function(t,e,n){return 500>t&&e&&e.Message?e.Message:n},t.loadFromLocalStorage=function(t,e){return localStorage&&null!==localStorage.getItem(t)?localStorage.getItem(t):e},t.saveToLocalStorage=function(t,e){if(localStorage)try{localStorage.setItem(t,e)}catch(n){}},t.selectElemText=function(t){if(window.getSelection){var e=document.createRange();e.selectNodeContents(t),window.getSelection().removeAllRanges(),window.getSelection().addRange(e)}},t.removeClassByPrefix=function(t,e){for(var n=0;n<t.e.classList.length;n++){var i=t.e.classList[n];if(0==i.indexOf(e)){t.removeClass(i);break}}},t.segmentScriptAvailable=function(){return"undefined"!=typeof segment&&segment.EnableButton&&segment.EnableButton.url};var d=document.createElement("canvas").getContext("2d");t.measureString=function(t,e){return d.font=e?e:'12px "Whitney SSm A", "Whitney SSm B", "Helvetica Neue", Arial, sans-serif',Number(d.measureText(t).width.toFixed())},t.scrollIfNotInView=function(t,e){var n=e.e.getBoundingClientRect(),i=t.e.getBoundingClientRect();(n.bottom>i.bottom||n.top<i.top)&&e.e.scrollIntoView(!1)},t.domainFromHost=function(t){var e=t.indexOf(":");return e>=0&&(t=t.slice(0,e)),t},t.isLocalhost=function(t){return"localhost"==t||"127.0.0.1"==t}}(t||(t={})),function(t){t.HighlightTypeFsId="fsidentity",t.HighlightTypeNewUid="newuid",t.UID_COOKIE="fs_uid",t.BAD_APP_IDS=" 0 1 -1 n/a nan undefined null nil the_id_that_you_use_in_your_app_for_this_user".split(" ");var e=function(){function e(t){void 0===t&&(t=document),this._doc=t,this._cookie=null,this._cookies={}}return e.prototype.initFromCookies=function(e,n){for(var i=this._doc.cookie.split(";"),r=0;r<i.length;r++){var o=i[r].replace(/^\s+|\s+$/g,"").split("="),s=o[0];this._cookies[s]||(this._cookies[s]=o[1])}var a=this._cookies[t.UID_COOKIE],u=s=o=r=i="";if(a){var c=a.split("`");3>c.length?i=a:(o=c[0],s=c[1],i=c[2],5<=c.length&&(u=decodeURIComponent(c[3]),0<=t.BAD_APP_IDS.indexOf(u)&&(t.logIfDebug('ignoring invalid app key "'+u+'" from cookie.'),u="")))}a=i.indexOf(":"),-1!=a&&(r=i.slice(a+1),i=i.slice(0,a)),this._cookie={Host:o,OrgId:s,UserId:i,SessionId:r,AppKey:u},(this._cookie.Host!=e||this._cookie.OrgId!=n)&&(this._cookie={Host:e,OrgId:n,UserId:"",SessionId:"",AppKey:""})},e.prototype.initFromParsedCookie=function(t){this._cookie=t},e.prototype.clear=function(){var t=this.host(),e=this.orgId();this._cookie={Host:t,OrgId:e,UserId:"",SessionId:"",AppKey:""},this.write()},e.prototype.host=function(){return this._cookie.Host},e.prototype.orgId=function(){return this._cookie.OrgId},e.prototype.userId=function(){return this._cookie.UserId},e.prototype.sessionId=function(){return this._cookie.SessionId},e.prototype.appKey=function(){return this._cookie.AppKey},e.prototype.cookieData=function(){return this._cookie},e.prototype.cookies=function(){return this._cookies},e.prototype.setCookie=function(t,e){var n=t+"="+e,n=this._domain?n+("; domain=."+encodeURIComponent(this._domain)):n+"; domain=";this._doc.cookie=n+"; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/"},e.prototype.setIds=function(e,n,i){t.isLocalhost(e)&&(e=""),this._domain=e,this._cookie.UserId=n,this._cookie.SessionId=i,this.write()},e.prototype.clearAppId=function(){return this._cookie.AppKey?(this._cookie.AppKey="",this.write(),!0):!1},e.prototype.setAppId=function(e){if("number"==typeof e&&e===e>>0&&(e=""+e),"string"!=typeof e)return t.logIfDebug("blocking FS.identify API call; uid value ("+e+") must be a string"),[!1,t.HighlightTypeFsId];var n=e.trim();return 0<=t.BAD_APP_IDS.indexOf(n.toLowerCase())?(t.logIfDebug("blocking FS.identify API call; uid value ("+e+") is illegal"),[!1,t.HighlightTypeFsId]):(e=void 0,this._cookie.AppKey&&this._cookie.AppKey!=n&&(t.logIfDebug("user re-identified; existing uid ("+this._cookie.AppKey+") does not match provided uid ("+n+")"),e=t.HighlightTypeNewUid),this._cookie.AppKey=n,this.write(),[!0,e])},e.prototype.encode=function(){var t=this._cookie.Host+"`"+this._cookie.OrgId+"`"+this._cookie.UserId+":"+this._cookie.SessionId;return this._cookie.AppKey&&(t+="`"+encodeURIComponent(this._cookie.AppKey)+"`"),t},e.prototype.write=function(){null!=this._domain&&this.setCookie(t.UID_COOKIE,this.encode())},e}();t.Identity=e}(t||(t={})),function(t){var e=function(){function e(t){this._identity=t,this.AccountSystemVars={acctId:"str",displayName:"str",website:"str"},this.UserSystemVars={uid:"str",displayName:"str",email:"str"},this.VarTypes={str:function(t){return"string"==typeof t},bool:function(t){return"boolean"==typeof t},"int":function(t){return"number"==typeof t&&0==t-Math.floor(t)},real:function(t){return"number"==typeof t},date:function(t){return t?!isNaN(t.constructor===Date?t:new Date(t)):!1}}}return e.prototype.identity=function(){return this._identity},e.prototype.drainApiQueue=function(t){if(t){for(var e=[],n=0;n<t.length;n++){var i=this.api(t[n][0],t[n][1]),r=i[0];i[1]&&(e=[]),e=e.concat(r)}return e}},e.prototype.api=function(e,n){var i=!1,r=[];switch(e){case"account":r=r.concat(this.setvar_api("acct",this.AccountSystemVars,n));break;case"user":if("uid"in n){var o=n.uid;if(!1===o)this._identity.clearAppId()&&(i=!0),delete n.uid;else{var o=this._identity.setAppId(o),s=o[1];if(!o[0]){switch(s){case t.HighlightTypeFsId:r.push({When:0,Kind:t.EVENT_SYS_HIGHLIGHT,Args:[t.HighlightTypeFsId,n.uid+""]});break;case void 0:break;default:t.logIfDebug("unexpected failReason returned from setAppId: "+s)}return[r,!1]}s==t.HighlightTypeNewUid&&(i=!0)}}r=r.concat(this.setvar_api("user",this.UserSystemVars,n));break;default:t.logIfDebug('invalid operation "'+e+'"; only "account" and "user" are supported at present')}return[r,i]},e.prototype.setvar_api=function(e,n,i){var r,o=[],s={};for(r in i)if(i.hasOwnProperty(r)){var a=i[r];t.logIfDebug("set-var('"+e+"'): \""+r+'" = '+t.stringify(a));var u=typeof a;if("object"!==u||a&&a.constructor==Date){var c,h;if(r in n)c=r,h=n[r];else{if(h=r.split("_"),2!=h.length){t.logIfDebug('variables must be of the form "name_type", where "type" is one of [str, bool, int, real, date]'),o.push({When:0,Kind:t.EVENT_SYS_HIGHLIGHT,Args:["varname",e+":"+r]});continue}-1!=r.indexOf(" ")?(c=r.replace(/ /g,""),o.push({When:0,Kind:t.EVENT_SYS_HIGHLIGHT,Args:["varname",e+":"+r]}),t.logIfDebug("Warning: variable '"+r+"' has spaces in it, which is disallowed. Converted name to '"+c+"'.")):c=r,h=h[1]}h in this.VarTypes?this.VarTypes[h](a)?("str"==h&&(a=a.trim()),"date"==h&&(a=this.toIsoString(a)),s[c]=a):(t.logIfDebug("illegal value "+t.stringify(a)+" for type "+h),"number"===u?u=0==a-Math.floor(a)?"integer":"real":"object"==u&&null!=a&&a.constructor==Date&&(u=isNaN(a)?"invalid date":"date"),o.push({When:0,Kind:t.EVENT_SYS_HIGHLIGHT,Args:["vartype",e+":"+r,u]})):(t.logIfDebug('invalid type "'+h+'"'),
o.push({When:0,Kind:t.EVENT_SYS_HIGHLIGHT,Args:["varname",e+":"+r]}))}else a instanceof Array&&(u="array"),o.push({When:0,Kind:t.EVENT_SYS_HIGHLIGHT,Args:["vartype",e+":"+r,u+" (unsupported)"]})}return o.push({When:0,Kind:t.EVENT_SYS_SETVAR,Args:[e,t.stringify(s)]}),o},e.prototype.toIsoString=function(t){return(t.constructor===Date?t:new Date(t)).toISOString()},e}();t.Vars=e}(t||(t={}));var r;!function(t){var e=/(?:[^\\](?:\\\\)*)/.source;t.CSS_URL=RegExp('url\\(\\s*"(.*?'+e+")\"\\s*\\)|url\\(\\s*'(.*?"+e+")'\\s*\\)|url\\((.*?"+e+")\\)","g"),t.QUOTES=/\"|'/g,t.HOVER=/\:hover/g,t.FOCUS=/\:focus/g,t.MEDIA_QUERY=/(@media.*?{)/g,t.DOMAIN=/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9]\.[a-zA-Z]{2,}$/,t.DOMAIN_PART=/^[a-zA-Z0-9-:]{1,61}$/,t.IPv4_PART=/^[0-9]{1,3}$/,t.IPv6_PART=/^[0-9a-f]{0,4}$/,t.PLAYBACK_URL_PARAMS=/.*\?Base=(.*)&Url=(.*)/,t.EMAIL=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,t.IMAGE_FILENAME=/\.(jpe?g|png|svg|gif|bmp)$/,t.ATTR_SELECTOR=/\[.*\]/g,t.SVG_NS=/svg\:/g}(r||(r={})),function(t){var e=function(){function t(t,e){this.parent=t,this.combinator=e,this.classes={},this.attrs={},this.attrMatch={}}return t.prototype.cssEscapeIdent=function(t){var e=function(t){return-1!="[]:./\\()@#%^&*'\" ".indexOf(t)?"\\"+t:"\\"+t.charCodeAt(0).toString(16)+" "};return"-"==t?"\\-":"-"==t[0]?"-"+t.slice(1).replace(/([^0-9a-zA-Z-_])/g,e):t.replace(/[^0-9a-zA-Z-_:]/g,e)},t.prototype.cssEscapeString=function(t){return'"'+t.replace(/[\x01-\x1f\"\\]/g,function(t){return'"'==t||"\\"==t?"\\"+t:"\\"+t.charCodeAt(0).toString(16)+" "})+'"'},t.prototype.serialize=function(){var t=this.combinator?this.combinator:"";this.tag&&(t+="*"==this.tag?this.tag:this.cssEscapeIdent(this.tag)),this.id&&(t+="#"+this.cssEscapeIdent(this.id));var e=Object.keys(this.classes);e.sort();for(var n=0;n<e.length;n++)t+="."+this.cssEscapeIdent(e[n]);for(var i in this.attrs)t=""==this.attrMatch[i]?t+("["+this.cssEscapeIdent(i)+"]"):t+("["+this.cssEscapeIdent(i)+this.attrMatch[i]+this.cssEscapeString(this.attrs[i])+"]");return t},t}();t.SelectorRule=e;var n=function(){function t(t){this.rules=t}return t.parse=function(n,i,r){void 0===i&&(i=null),n=n.trim();var o=new e(null,null),s=0,a=!1,u=function(){throw"Invalid selector"},c=function(){if(_=n[++s],"\n"==_||null==_)throw u();if(_.match(/[0-9a-fA-F]/)){var t="";do t+=_,_=n[++s];while(_&&_.match(/[0-9a-fA-F]/));return _&&_.match(/[\s]/)&&s++,String.fromCharCode(parseInt(t,16))}return s++,_},h=function(t){for(var e,i=s,r="";null!=(e=n[s]);)if("\\"==e)r+=c();else{if(!(e.match(t?/[a-zA-Z0-9_:\-]/:/[a-zA-Z0-9_\-]/)||128<e.charCodeAt(0)))break;r+=e,s++}if(i==s)throw u();return r},d=function(){for(;null!=n[s]&&n[s].match(/\s/);)s++},l=function(){a=!0,s++;var t=h().toLowerCase();try{var e;d();var r=n[s],l="=";if(("*"==r||"|"==r||"^"==r||"$"==r||"~"==r)&&(l=r+"=",s++),i&&!i[l])throw u();if("="!=n[s])throw u();s++,d(),e=l}catch(f){if(i&&!i["[]"]||"Invalid selector"!=f)throw f;if("]"!=n[s])throw u();return s++,void(o.attrs[t]=o.attrMatch[t]="")}for(_=n[s],'"'==_||"'"==_?(r=_,s++):r="]",l="";(_=n[s])!=r;){if(null==_)throw u();if("\\"==_)l+=c();else{if("]"==r&&('"'==_||"'"==_))throw u();l+=_,s++}}s++,"]"!=r&&"]"==n[s]&&s++,o.attrs[t]=l,o.attrMatch[t]=e},f=function(){if(!a)throw u();a=!1,d();var t=n[s];if(">"==t||"+"==t||"~"==t?(s++,d()):t=" ",o=new e(o,t),i&&!i[t])throw u()};if(0==n.indexOf("//"))throw u();for(var p=0,s=0;s<n.length;){if(p++>2*n.length)throw console.log("Likely caught in an infinite loop while parsing "+n),"Internal error, infinite loop";var _=n[s];switch(_){case"#":a=!0,s++,o.id=h();break;case"*":if(a)throw u();if(a=!0,o.tag="*",i&&!i["*"])throw u();s++;break;case".":a=!0,s++,o.classes[h()]=!0;break;case"[":l();break;case" ":case">":case"+":case"~":f();break;case":":throw u();default:if(a)throw u();a=!0,o.tag=h(r).toLowerCase()}}if(!a)throw u();return new t(o)},t.prototype.serialize=function(){for(var t=null,e=this.rules;e;e=e.parent)t=t?e.serialize()+t:e.serialize();return t},t}();t.Selector=n}(t||(t={})),function(t){function e(t){var e={};if(!t)return e;if(t.classList)for(var n=0;n<t.classList.length;++n)e[t.classList[n]]=!0;else if(t.className)for(t=(null!=t.className.animVal?t.className.animVal:t.className).split(" "),n=0;n<t.length;++n)e[t[n].trim()]=!0;return e}t.NYI_KIND="nyi",t.BLOCKED_KIND="blocked",t.HIDE_KIND="hide";var n=function(){function t(t,e){this._parent=t,this._rule=e}return t.prototype.parent=function(){return this._parent},t.prototype.matches=function(n,i){if(!n||this._rule.tag&&n.tagName.toLowerCase()!=this._rule.tag||this._rule.id&&n.id!=this._rule.id)return!1;for(var r in this._rule.classes)if(!(r in i))return!1;for(var o in this._rule.attrs)if(r=n.getAttribute(o),null==r||!t.attrPredicates[this._rule.attrMatch[o]](r,this._rule.attrs[o]))return!1;return this._parent?this._parent.matches(n.parentElement,e(n.parentElement)):!0},t.attrPredicates={"":function(t,e){return!0},"=":function(t,e){return t==e},"*=":function(t,e){return-1<t.indexOf(e)},"^=":function(t,e){return 0==t.lastIndexOf(e,0)},"$=":function(t,e){return t.indexOf(e,t.length-e.length)+e.length==t.length},"~=":function(t,e){return-1<t.split(/\s+/).indexOf(e)},"|=":function(t,e){return-1<t.split("-").indexOf(e)}},t}();t.BlockRuleElem=n;var i=function(){function e(e){this.kind=e.Kind,this.selector=t.Selector.parse(e.Selector,{">":!0,"=":!0,"[]":!0,"*=":!0,"^=":!0,"$=":!0,"~=":!0,"|=":!0});var i=function(t){return new n(t.parent?i(t.parent):null,t)};this.rules=i(this.selector.rules)}return e.isComment=function(t){return!!t.match(/^\s*\/\//)},e.prototype.serialize=function(){return this.selector.serialize()},e}();t.BlockRule=i;var r=function(){function t(){this._rules=[],this._predicateRules=[],this.rawRules=[]}return t.prototype.isBlocked=function(t){for(var n=0;n<this._predicateRules.length;++n)if(this._predicateRules[n].Selector(t))return this._predicateRules[n].Kind;for(var i=e(t),n=0;n<this._rules.length;++n)if(this._rules[n].rules.matches(t,i))return this._rules[n].kind;return null},t.prototype.addRule=function(t){this._rules.push(new i(t)),this.rawRules.push(t)},t.prototype.addPredicateRule=function(t){this._predicateRules.push(t)},t.prototype.mungeBlockedStyle=function(t,e){var n=t.getBoundingClientRect(),i=Math.floor(n.width),n=Math.floor(n.height);if("object"==t.tagName.toLowerCase())for(var r=t.children,o=0;o<r.length;o++){var s=r[o];if("embed"==s.tagName.toLowerCase()){r=s.getBoundingClientRect(),i=Math.max(i,Math.floor(r.width)),n=Math.max(n,Math.floor(r.height));break}}return r="",null!=e&&(r=e.trim()),0<r.length&&";"!=r.charAt(r.length-1)&&(r+=";"),(0!=i||0!=n)&&(r+="width:"+i+"px;height:"+n+"px;"),r},t}();t.Blocker=r}(t||(t={})),function(t){t.MutationProcessingInterval=250,t.CurveSamplingInterval=142,t.UploadInterval=5e3,t.UserInactivityTimeout=1e4,t.HeartbeatInitial=4e3,t.HeartbeatMax=256e3,t.PageInactivityTimeout=18e5,t.BackoffMax=3e5,t.ScrollSampleInterval=t.MutationProcessingInterval/5,t.InactivityThreshold=4e3}(t||(t={})),function(t){var e=function(){function t(t,e,n){this._ctx=t,this._q=e,this._valueIndices=n,this._evts=[]}return t.prototype.add=function(t){0==this._evts.length&&this._q.push(t),this._evts.push(t)},t.prototype.finish=function(t,e){var n=this._evts.length;if(1>=n)return!1;for(var i=this._evts[0].When,r=this._evts[n-1].When,o=0;o<this._valueIndices.length;++o){var s=this._valueIndices[o],a=this._evts[0].Args[s],u=(this._evts[1].When-i)/(r-i),c=(this._evts[1].Args[s]-a)/u,h=this._evts[n-1].Args[s],u=(r-this._evts[n-2].When)/(r-i);e.push(a,h,c,(h-this._evts[n-2].Args[s])/u)}return this._evts[0].Kind=t,this._evts[0].Args=e,!0},t.prototype.evts=function(){return this._evts},t}(),n=function(){function n(t){this._ctx=t,this._gotInitialScroll=!1}return n.prototype.processQueue=function(n){if(0==n.length)return n;this._ctx.maybeAddInitialScroll();for(var i,r=this._ctx.now(),o=[],s=new e(this._ctx,o,[0,1]),a={},u={},c=0;c<n.length;++c){var h=n[c];switch(h.Kind){case t.EVENT_MOUSEMOVE:s.add(h);break;case t.EVENT_TOUCHMOVE:var d=h.Args[0];d in a||(a[d]=new e(this._ctx,o,[1,2])),a[d].add(h);break;case t.EVENT_SCROLL:d=h.Args[0],d in u||(u[d]=new e(this._ctx,o,[1,2])),u[d].add(h);break;case t.EVENT_INNERWIDTH:i||(i=new e(this._ctx,o,[0])),i.add(h);break;default:o.push(h)}}s.finish(t.EVENT_MOUSEMOVE_CURVE,[r])&&(n=s.evts(),s=n[n.length-1].Args,2<s.length&&s[2]&&n[0].Args.push(s[2]));for(d in u)n=parseInt(d),u[n].finish(t.EVENT_SCROLL_CURVE,[r,n]);for(d in a)n=parseInt(d),a[n].finish(t.EVENT_TOUCHMOVE_CURVE,[r,n]);return i&&i.finish(t.EVENT_INNERWIDTH_CURVE,[r]),o},n}();t.EventProcessor=n}(t||(t={})),function(t){function e(){var e,o;try{throw Error("")}catch(s){e="<generated>\n",o=s.stack||s.backtrace||s.stacktrace}if(!o){e="<generated-ie>\n",o=[];try{for(var a=arguments.callee.caller.caller;a&&o.length<n;){var u=r.test(a.toString())?RegExp.$1||i:i;o.push(u),a=a.caller}}catch(c){t.logIfDebug(c)}o=o.join("\n")}return e+o}var n=10,i="[anonymous]",r=/function\s*([\w\-$]+)?\s*\(/i;t.sendToBugsnag=function(t,n){var i,r={projectRoot:window.location.origin,"metaData[device][time]":(new Date).getTime(),context:document.location.pathname,message:t.message,name:"Recording Error",payloadVersion:3,releaseStage:"production",severity:n,notfierVersion:"3.2.0",language:"en-GB",stacktrace:t.stack||t.backtrace||t.stacktrace||e(),apiKey:"38f089fdedbe27e3ca594fb18cdbc78e",ct:"img",cb:(new Date).getTime()},o=[];for(i in r)o.push(encodeURIComponent(i)+"="+encodeURIComponent(r[i]));(new Image).src="https://notify.bugsnag.com/js?"+o.sort().join("&")}}(t||(t={})),function(t){function e(e,n){return t.stringify({__fs:[e,n?n:""]})}function n(e){return t.isLocalhost(t.domainFromHost(e))?e:0==e.indexOf("www.")?"r."+e.slice(4):"r."+e}function i(e,n){var i=Math.min(t.BackoffMax,5e3*Math.pow(2,e));return n?i+.25*Math.random()*i:i}function r(t){return t>=400||202==t?!0:!1}function o(t,e,n,i,r,o,s){return t="/rec/bundle?OrgId="+t+"&UserId="+e+"&SessionId="+n+"&PageId="+i+"&Seq="+r.Seq,o&&(t+="&PageStartTime="+o),s&&(t+="&DeltaT="+s),t}var s=function(){function e(t,e){void 0===e&&(e=new a),this._wnd=t,this._messagePoster=e}return e.prototype.enqueueEvents=function(e){this._messagePoster.postMessage(this._wnd.parent,t.FS_IFRAME_EVENTS,e)},e.prototype.startPipeline=function(t){},e.prototype.stopPipeline=function(){},e.prototype.flush=function(){},e.prototype.singSwanSong=function(){},e}();t.PostMessageEventTransport=s;var a=function(){function n(){}return n.prototype.postMessage=function(n,i,r){var o;try{o=t._fs_transport(n)}catch(s){}o?o.send(i,t.stringify(r)):n.postMessage(e(i,r),"*")},n}();t.PostMessagePoster=a,t.formatPostMessageData=e,t.bundleHost=n,s=function(){function e(e,i,r,o,s){void 0===r&&(r=t.RealTicker),void 0===o&&(o=t.RealTimeout),void 0===s&&(s=new u),this._ctx=e,this._onShutdown=i,this._tickerFactory=r,this._timeoutFactory=o,this._poster=s,this._backoffTime=this._backoffRetries=this._byteCount=0,this._bundleSeq=1,this._lastPostTime=0,this._outgoingEventQueue=[],this._bundleQueue=[],this._bundleHost=n(e.getHost()),this._protocol=e.getProtocol(),this._identity=e.getIdentity(),this._lastBundleTime=e.wallTime(),this._uploadTicker=new this._tickerFactory(t.UploadInterval),this._swanSong=new t.SwanSong(e,this,o)}return e.prototype.protocol=function(){return this._protocol},e.prototype.enqueueEvents=function(t){this._outgoingEventQueue=this._outgoingEventQueue.concat(t)},e.prototype.startPipeline=function(t){var e=this;this._pageId=t,this.enqueueAndSendBundle(),this._uploadTicker.start(function(){e.enqueueAndSendBundle()})},e.prototype.stopPipeline=function(){this._uploadTicker.stop(),this._outgoingEventQueue=[],this._bundleQueue=[]},e.prototype.flush=function(){this.maybeSendNextBundle()},e.prototype.singSwanSong=function(){if(0<this._outgoingEventQueue.length&&this.enqueueNextBundle(!0),0<this._bundleQueue.length||this._pendingBundle){var t=this._bundleQueue.concat();this._pendingBundle&&t.unshift(this._pendingBundle),this._swanSong.sing(this._pageId,t,this._lastBundleTime)}},e.prototype.sendSwanSongBundle=function(t,e,n,i,r,s,a,u,c){void 0===c&&(c=null),t=o(t,e,n,i,r,s,a),this.post(t,r,u,c)},e.prototype.enqueueAndSendBundle=function(){this._pendingBundle?this._pendingBundleFailed&&this._sendPendingBundle():0==this._outgoingEventQueue.length?this.maybeSendNextBundle():this.enqueueNextBundle()},e.prototype.enqueueNextBundle=function(e){void 0===e&&(e=!1);var n={When:this._outgoingEventQueue[0].When,Seq:this._bundleSeq++,Evts:this._outgoingEventQueue};this._outgoingEventQueue=[],this._bundleQueue.push(n),e&&this._poster.sendBeacon(this._protocol,this._bundleHost,this.bundleUrl(n),t.stringify(n))||this.maybeSendNextBundle()},e.prototype.maybeSendNextBundle=function(){this._pageId&&!this._pendingBundle&&0!=this._bundleQueue.length&&(this._pendingBundle=this._bundleQueue.shift(),this._sendPendingBundle())},e.prototype._sendPendingBundle=function(){var e=this,n=this._ctx.wallTime();if(!(n<this._backoffTime)){var i=this._pendingBundle;this._pendingBundleFailed=!1,this._lastPostTime=this._lastBundleTime=n,this.sendBundle(i,function(n){t.logIfDebug("Sent bundle "+i.Seq+" with "+i.Evts.length+" events"),e._pendingBundle=null,e._backoffTime=0,e._backoffRetries=0,e._ctx.wallTime()-e._lastPostTime>t.UploadInterval&&e.maybeSendNextBundle()},function(n){t.logIfDebug("Failed to send events."),r(n)?e._onShutdown():(e._pendingBundleFailed=!0,e._backoffTime=e._lastPostTime+e._poster.exponentialBackoffMs(e._backoffRetries++,!1))})}},e.prototype.sendBundle=function(t,e,n){void 0===n&&(n=null),this.post(this.bundleUrl(t),t,e,n)},e.prototype.bundleUrl=function(t){return o(this._identity.orgId(),this._identity.userId(),this._identity.sessionId(),this._pageId,t)},e.prototype.post=function(e,n,i,r){void 0===r&&(r=null);var o=null;null!=n&&(o=t.stringify(n),this._byteCount+=o.length,t.logIfDebug("total bytes written: "+this._byteCount)),this._poster.post(this._protocol,this._bundleHost,e,o,i,r)},e}(),t.HttpEventTransport=s;var u=function(){function e(){}return e.prototype.post=function(e,n,i,r,o,s){void 0===s&&(s=null),n="//"+n+i;var a=!1,u=new XMLHttpRequest;if("withCredentials"in u)u.onreadystatechange=function(){if(u.readyState==t.XHR_DONE&&!a){a=!0;try{200==u.status?o(u.responseText):s(u.status)}catch(e){t.sendToBugsnag(e,"error")}}},u.open("POST",e+n,!0),u.withCredentials=!0,u.setRequestHeader("Content-Type","text/plain"),u.send(r);else{var c=new XDomainRequest;c.onload=function(){o(c.responseText)},c.onerror=function(){s("Not Found"==c.responseText?404:500)},c.onprogress=function(){},c.open("POST",n),c.send(r)}},e.prototype.sendBeacon=function(t,e,n,i){return"function"==typeof navigator.sendBeacon?(navigator.sendBeacon(t+"//"+e+n,i),!0):!1},e.prototype.exponentialBackoffMs=function(t,e){return i(t,e)},e}();t.XHRPoster=u,t.exponentialBackoffMs=i,t.isErrorFatal=r}(t||(t={})),function(t){var e=function(){function t(){this.dict={idx:-1,map:{}},this.nodeCount=1,this.startIdx=0}return t.prototype.encode=function(e){function n(){o?1<a.length?s.push([o.idx,a.length]):s.push(o.idx):s.push(a[0])}if(0==e.length)return[];for(var i,r=e[0],o=Object.prototype.hasOwnProperty.call(this.dict.map,r)?this.dict.map[r]:null,s=[],a=[r],r=1;r<e.length;r++)if(i=e[r],o&&Object.prototype.hasOwnProperty.call(o.map,i))a.push(i),o=o.map[i];else{n();var u=this.startIdx+r-a.length;null==o&&this.nodeCount<t.MAX_NODES&&(o={idx:u,map:{}},this.dict.map[a[a.length-1]]=o,this.nodeCount++),this.nodeCount<t.MAX_NODES&&(o.map[i]={idx:u,map:{}},this.nodeCount++),a=[i],o=Object.prototype.hasOwnProperty.call(this.dict.map,i)?this.dict.map[i]:null}return n(),this.startIdx+=e.length,s},t.MAX_NODES=1e4,t}();t.LZJGWEncoder=e,e=function(){function t(){this._seq=[]}return t.prototype.sequence=function(){return this._seq},t.prototype.decode=function(t){for(var e=this._seq.length,n=0;n<t.length;++n){var i=t[n];switch(typeof i){case"string":this._seq.push(i);break;case"number":this._seq.push(this._seq[i]);break;case"object":for(var r=0;r<i[1];r++)this._seq.push(this._seq[i[0]+r])}}return e},t}(),t.LZJGWDecoder=e}(t||(t={})),function(t){var e=function(){function e(e,n,i){void 0===i&&(i=t.RealTimeout),this._ctx=e,this._transport=n,this._timeoutFactory=i,this._recover(),this._identity=e.getIdentity()}return e.prototype.sing=function(e,n,i){t.logIfDebug("Saving "+n.length+" bundles in swan-song."),e={OrgId:this._identity.orgId(),UserId:this._identity.userId(),SessionId:this._identity.sessionId(),PageId:e,Bundles:n,PageStartTime:this._ctx.startTime(),LastBundleTime:i};try{localStorage.singSwanSong=t.stringify(e)}catch(r){}},e.prototype._recover=function(){try{if("singSwanSong"in localStorage){var e=localStorage.singSwanSong;delete localStorage.singSwanSong;var n=t.parseJson(e);n.Bundles&&n.UserId&&n.SessionId&&n.PageId?(n.OrgId||(n.OrgId=this._identity.orgId()),0<n.Bundles.length&&(t.logIfDebug("Sending "+n.Bundles.length+" bundles as prior page swan song"),this.sendSwanSongBundles(n.OrgId,n.UserId,n.SessionId,n.PageId,n.PageStartTime,n.Bundles,n.LastBundleTime))):t.logIfDebug("Malformed swan song found. Ignoring it.")}}catch(i){t.logIfDebug("Error recovering swan-song: "+i)}},e.prototype.sendSwanSongBundles=function(e,n,i,r,o,s,a,u){var c=this;void 0===u&&(u=0);var h=null;t.windex.Array.isArray(s)&&0!==s.length&&void 0!==s[0]&&(1==s.length&&(h=this._ctx.wallTime()-a),this._transport.sendSwanSongBundle(e,n,i,r,s[0],o,h,function(u){t.logIfDebug("Sent "+s[0].Evts.length+" trailing events from last session as Seq "+s[0].Seq),t.windex.Array.prototype.shift.call(s),0<s.length?c.sendSwanSongBundles(e,n,i,r,o,s,a):t.logIfDebug("Done with prior page swan song")},function(h){t.isErrorFatal(h)?t.logIfDebug("Fatal error while sending events, giving up"):(t.logIfDebug("Failed to send events from last session, will retry while on this page"),c._lastSwanSongRetryTimeout=new c._timeoutFactory(c.sendSwanSongBundles,t.exponentialBackoffMs(u,!0),c,e,n,i,r,o,s,a,u+1))}))},e}();t.SwanSong=e}(t||(t={})),function(t){var e=function(){function t(t){this._interval=t,this._handle=-1}return t.prototype.start=function(t){-1==this._handle&&(this._handle=setInterval(t,this._interval))},t.prototype.stop=function(){-1!=this._handle&&(clearInterval(this._handle),this._handle=-1)},t}();t.RealTicker=e;var n=function(){function e(e,n,i){void 0===n&&(n=0);for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];this.delay=n,this.timer=-1,this.handler=t.bind.apply(void 0,[e,void 0===i?window:i].concat(r)),this.timer=setTimeout(this.handler,n),this.args=r}return e.prototype.cancel=function(){clearTimeout(this.timer),this.timer=-1},e.prototype.reset=function(t){void 0===t&&(t=this.delay),this.delay=t,clearTimeout(this.timer),this.timer=setTimeout(this.handler,this.delay)},e}();t.RealTimeout=n;var i=function(){function i(i,r,o,s,a){var u=this;void 0===o&&(o=function(){return[]}),void 0===s&&(s=e),void 0===a&&(a=n),this._ctx=i,this._transport=r,this._gatherExternalEvents=o,this._tickerFactory=s,this._timeoutFactory=a,this._recordingDisabled=!1,this._lastWhen=-1,this._lastUserAction=0,this._hibernating=this._quiescent=!1,this._lastHeartbeat=0,this._heartbeatInterval=t.HeartbeatInitial,this._gotUnload=!1,this._eventQueue=[],this._sampleCurvesTicker=new this._tickerFactory(t.CurveSamplingInterval),this._processMutationsTicker=new this._tickerFactory(t.MutationProcessingInterval),this._hibernationTimeout=new this._timeoutFactory(function(){u.hibernate()},t.PageInactivityTimeout,this),this._processor=new t.EventProcessor(i)}return i.prototype.startPipeline=function(t,e,n){var i=this;this._recordingDisabled||this._pipelineStarted||(this._pipelineStarted=!0,this._frameId=e,this._parentIds=n,this._lastUserAction=this._ctx.now(),this.processEvents(),this._processMutationsTicker.start(function(){i.processEvents()}),this._sampleCurvesTicker.start(function(){i.processEvents(!0)}),this._transport.startPipeline(t))},i.prototype.enqueue=function(t,e){this.enqueueAt(this._ctx.now(),t,e)},i.prototype.enqueueAt=function(e,n,i){this._hibernating&&t.isUserActionEvent(n)?this._ctx.splitPage():this._recordingDisabled||(e<=this._lastWhen&&(e=this._lastWhen+1),this._lastWhen=e,this._eventQueue.push({When:e,Kind:n,Args:i}),t.isUserActionEvent(n)&&(this._lastUserAction=e,this._hibernationTimeout.reset()))},i.prototype.hibernate=function(){this.shutdown(),this._hibernating=!0},i.prototype.enqueueFirst=function(t,e){0<this._eventQueue.length?this._eventQueue.unshift({When:this._eventQueue[0].When,Kind:t,Args:e}):this.enqueue(t,e)},i.prototype.addUnload=function(){this._gotUnload||(this._gotUnload=!0,this.enqueue(t.EVENT_UNLOAD,[]),this._lastUserAction=this._ctx.now(),this.singSwanSong())},i.prototype.shutdown=function(){this._flush(),this.addUnload(),this._flush(),this._recordingDisabled=!0,this.stopPipeline(),this._hibernationTimeout.cancel()},i.prototype._flush=function(){this.processEvents(),this._transport.flush()},i.prototype.prequeue=function(t,e){this._recordingDisabled||this._eventQueue.unshift({When:0,Kind:t,Args:e})},i.prototype.appendToQueue=function(t){this._eventQueue=this._eventQueue.concat(t)},i.prototype.singSwanSong=function(){this._recordingDisabled||(this.processEvents(),this._transport.singSwanSong())},i.prototype.rebaseIframe=function(t){for(var e=0,n=this._eventQueue.length;n>e;e++){var i=this._eventQueue[e],r=i.When+this._ctx.startTime()-t;0>r&&(r=0),i.When=r}},i.prototype.processEvents=function(e){if(this._pipelineStarted&&!this._hibernating&&(this._ctx.now()-this._lastUserAction>t.UserInactivityTimeout?this._quiescent||(this._quiescent=!0,this._heartbeatInterval=t.HeartbeatInitial,this._lastHeartbeat=this._ctx.now()):this._quiescent=!1,!this._quiescent||this.maybeSendHeartbeat())){var n=this._eventQueue;this._eventQueue=[],n=this._processor.processQueue(n),e||(n=n.concat(this._gatherExternalEvents())),this.ensureFrameIds(n),0!=n.length&&this._transport.enqueueEvents(n)}},i.prototype.maybeSendHeartbeat=function(){var e=this._ctx.now();return e-this._lastHeartbeat>=this._heartbeatInterval?(this._lastHeartbeat=e,this._heartbeatInterval*=2,this._heartbeatInterval>t.HeartbeatMax&&(this._heartbeatInterval=t.HeartbeatMax),this.enqueue(t.EVENT_HEARTBEAT,[]),!0):!1},i.prototype.ensureFrameIds=function(t){if(this._frameId)for(var e=this._parentIds,n=e&&0<e.length,i=0;i<t.length;++i){var r=t[i];r.FId||(r.FId=this._frameId),n&&!r.PIds&&(r.PIds=e)}},i.prototype.stopPipeline=function(){this._pipelineStarted&&(this._sampleCurvesTicker.stop(),this._processMutationsTicker.stop(),this._eventQueue=[],this._transport.stopPipeline())},i}();t.EventQueue=i}(t||(t={})),function(t){var e=function(){function e(t,e){this._queue=t,this._wnd=e,this._overflow=this._enabled=!1,this._total=0}return e.prototype.enable=function(){var e=this;e._enabled||(e._enabled=!0,this._wnd.console?(console.log&&console.log.apply&&(e._oldLog=console.log,console.log=t.$entry(function(){return e.addLog("log",arguments),e._oldLog.apply(this,arguments)})),console.info&&console.info.apply&&(e._oldInfo=console.info,console.info=t.$entry(function(){return e.addLog("info",arguments),e._oldInfo.apply(this,arguments)})),console.warn&&console.warn.apply&&(e._oldWarn=console.warn,console.warn=t.$entry(function(){return e.addLog("warn",arguments),e._oldWarn.apply(this,arguments)})),console.error&&console.error.apply&&(e._oldError=console.error,console.error=t.$entry(function(){return e.addLog("error",arguments),e._oldError.apply(this,arguments)}))):e.addLog("log",["NOTE: Log messages cannot be captured on IE9"]),e._oldOnError=this._wnd.onerror,this._wnd.onerror=function(t,n,i){return e.addError(t,n,i),e._oldOnError?e._oldOnError.apply(this,arguments):void 0})},e.prototype.disable=function(){this._enabled&&(this._enabled=!1,this._oldLog&&(console.log=this._oldLog),this._oldInfo&&(console.info=this._oldInfo),this._oldWarn&&(console.warn=this._oldWarn),this._oldError&&(console.error=this._oldError),this._wnd.onerror=this._oldOnError)},e.prototype.addLog=function(e,n){if(this.checkOverflow()){for(var i=[e],r=0;r<n.length;++r)i.push(t.stringify(n[r],1e3));this._queue.enqueue(t.EVENT_LOG,i)}},e.prototype.addError=function(e,n,i){this.checkOverflow()&&("object"==typeof e&&(e=t.stringify(e,1e3)),"object"==typeof n&&(n=t.stringify(n,100)),"object"==typeof i&&(i=-1),this._queue.enqueue(t.EVENT_ERROR,[e,n,i]))},e.prototype.checkOverflow=function(){return this._overflow?!1:this._total==t.MAX_LOGS_PER_PAGE?(this._queue.enqueue(t.EVENT_LOG,["warn",e.OVERFLOW_MSG]),this._overflow=!0,!1):(this._total++,!0)},e.OVERFLOW_MSG='"[received more than '+t.MAX_LOGS_PER_PAGE+' messages; no longer recording console]"',e}();t.ConsoleWatcher=e}(t||(t={})),function(t){function e(t,e){var n=Object.getOwnPropertyDescriptor(t.prototype,e);Object.defineProperty(t.prototype,e,{set:function(t){var e=this;return setTimeout(function(){r&&r(e)},0),n.set.call(this,t)},get:function(){return n.get.call(this)}})}function n(t){switch(t.type){case"checkbox":case"radio":return""+t.checked;default:return(t=t.value)||(t=""),""+t}}var i=function(){function i(e,i){var o=this;this._onchange=e,this._checkElem=i,this._fallback=!1,this._elems={},this._values={},r=function(e){var i=t.fsid(e);if(i&&(e=o._elems[i])){var r=n(e);r!=o._values[i]&&(o._onchange(e),o._values[i]=r)}}}return i.prototype.hookEvents=function(){var t;(t=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"))&&t.set?(o||(e(HTMLInputElement,"value"),e(HTMLInputElement,"checked"),e(HTMLSelectElement,"value"),e(HTMLTextAreaElement,"value"),o=!0),t=!0):t=!1,t||(this._fallback=!0)},i.prototype.addInput=function(e){var i=t.fsid(e);this._elems[i]=e,this._values[i]=n(e);t:switch(e.type){case"checkbox":case"radio":i=e.checked!=e.hasAttribute("checked");break t;default:var i=e.value||"",r=e.getAttribute("value")||"",i=i!=r}i&&this._onchange(e)},i.prototype.invokeGlobalOnChange=function(t){r&&r(t)},i.prototype.tick=function(){for(var t in this._elems)if(this._checkElem(this._elems[t])){if(this._fallback){var e=this._elems[t],i=n(e);i!=this._values[t]&&(this._onchange(e),this._values[t]=i)}}else delete this._elems[t],delete this._values[t]},i.prototype.shutdown=function(){r=null},i.prototype._usingFallback=function(){return this._fallback},i.prototype._trackingElem=function(t){return!!this._elems[t]},i}();t.InputWatcher=i;var r,o=!1;t.valueOfInputishElem=n}(t||(t={})),function(t){function e(t){return"_fsblocked"in t}function n(t){return t._fsblocked}function i(t,e){t._fsblocked=e}function r(t){return t?t._fs:null}function o(t){return(t=r(t))?t.id:0}function s(t){t.parent&&(t.parent.child==t&&(t.parent.child=t.next),t.parent.lastChild==t&&(t.parent.lastChild=t.prev),t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t.parent=t.prev=t.next=null,t.id=0,t.child&&a(t.child))}function a(t){for(t=[t];0<t.length&&1e4>t.length;){var e=t.pop();e.id=0,e.next&&t.push(e.next),e.child&&t.push(e.child)}}function u(t,e){if(t.attributes&&0<t.attributes.length)for(var n=0;n<t.attributes.length;n++){var i=t.attributes[n];e(i.name,i.value)}}function c(t,e,i,r){return"class"==e&&0>i.indexOf("_fs_block_")?i+=" _fs_block_"+n(t):"style"!=e&&("type"==e&&"object"==t.tagName.toLowerCase()||"value"==e||"checked"==e||"src"==e||"data"==e)&&(i=null),i}t.isBlocked=e,t.blockKind=n,t.setBlocked=i,t.mirrorFor=r,t.fsid=o,t.fsidIfNotBlocked=function(t){return e(t)?0:o(t)},t.removeMirror=s,t.clearIds=a;var h=function(){function e(t){this._blocker=t,this._curId=1}return e.prototype.curId=function(){return this._curId},e.prototype.tokenizeNode=function(t,e,n,i){var o=this._curId;try{var a=r(t),u=r(e);e=[];var c=this.tokeNode(n,e,i);return c&&t&&(s(c),c.parent=a,u==a.child&&(a.child=c),c.next=u,null==u?(c.prev=a.lastChild,a.lastChild=c):c.prev=u.prev,null!=c.prev&&(c.prev.next=c),null!=c.next&&(c.next.prev=c)),e}catch(h){return this._curId=o,[]}},e.prototype.tokeNode=function(e,n,i){if("SCRIPT"==e.nodeName||e.nodeType==t.Node_COMMENT_NODE)return null;var r={id:this._curId++,node:e};e._fs=r;var o=e.nodeName;"http://www.w3.org/2000/svg"==e.namespaceURI&&(o="svg:"+o),n.push("<"+o);try{var s=this.processBlockedElem(e,n);if(i&&i(e,s),s)return r;if(u(e,function(t,e){n.push(":"+t),n.push(e)}),e.firstChild){n.push("[");for(var o=null,a=e.firstChild;a;a=a.nextSibling){var c=this.tokeNode(a,n,i);c&&(c.parent=r,o?(o.next=c,c.prev=o):r.child=c,o=r.lastChild=c)}n.push("]")}e.nodeType==t.Node_TEXT_NODE&&n.push(e.textContent)}catch(h){}return r},e.prototype.processBlockedElem=function(e,n){var r=this;if(e.nodeType==t.Node_ELEMENT_NODE&&this._blocker){var o=this._blocker.isBlocked(e);if(o){i(e,o);var s,a=!1;return u(e,function(t,i){i=c(e,t,i,r._blocker),"class"==t?s=!0:"style"==t&&(a=!0),null!=i&&(n.push(":"+t),n.push(i))}),s||(n.push(":class"),n.push("_fs_block_"+o)),a||(n.push(":style"),n.push(this._blocker.mungeBlockedStyle(e,""))),!0}}return!1},e}();t.NodeEncoder=h,t.rewriteBlockedAttribute=c}(t||(t={})),function(t){function e(){p=!1;var t=_;_=[],t.sort(function(t,e){return t.uid_-e.uid_});var i=!1;t.forEach(function(t){var e=t.takeRecords();n(t),e.length&&(t.callback_(e,t),i=!0)}),i&&e()}function n(t){t.nodes_.forEach(function(e){(e=h.get(e))&&e.forEach(function(e){e.observer===t&&e.removeTransientObservers()})})}function i(t,e){for(var n=t;n;n=n.parentNode){var i=h.get(n);if(i)for(var r=0;r<i.length;r++){var o=i[r],s=o.options;(n===t||s.subtree)&&(s=e(s))&&o.enqueue(s)}}}function r(t){this.callback_=t,this.nodes_=[],this.records_=[],this.uid_=++g}function o(t,e){this.type=t,this.target=e,this.addedNodes=[],this.removedNodes=[],this.oldValue=this.attributeNamespace=this.attributeName=this.nextSibling=this.previousSibling=null}function s(t){if(v)return v;var e=m,n=new o(e.type,e.target);return n.addedNodes=e.addedNodes.slice(),n.removedNodes=e.removedNodes.slice(),n.previousSibling=e.previousSibling,n.nextSibling=e.nextSibling,n.attributeName=e.attributeName,n.attributeNamespace=e.attributeNamespace,n.oldValue=e.oldValue,v=n,v.oldValue=t,v}function a(t,e,n){this.observer=t,this.target=e,this.options=n,this.transientObservedNodes=[]}t.MutationObserver=window.MutationObserver||window.WebKitMutationObserver||r;var u=Object.defineProperty,c=Date.now()%1e9,h=new(window.WeakMap||function(){var t=function(){this.name="__st"+(1e9*Math.random()>>>0)+(c++ +"__")};return t.prototype={set:function(t,e){var n=t[this.name];n&&n[0]===t?n[1]=e:u(t,this.name,{value:[t,e],writable:!0})},get:function(t){var e;return(e=t[this.name])&&e[0]===t?e[1]:void 0}},t}()),d=window.setImmediate||window.msSetImmediate;if(!d){var l=[],f=String(Math.random());window.addEventListener("message",function(t){t.data===f&&(t=l,l=[],t.forEach(function(t){t()}))}),d=function(t){for(var e=1;e<arguments.length;e++);return l.push(t),window.postMessage(f,"*"),0}}var p=!1,_=[],g=0;r.prototype={observe:function(t,e){if(t=window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(t)||t,!e.childList&&!e.attributes&&!e.characterData||e.attributeOldValue&&!e.attributes||e.attributeFilter&&e.attributeFilter.length&&!e.attributes||e.characterDataOldValue&&!e.characterData)throw new SyntaxError;var n=h.get(t);n||h.set(t,n=[]);for(var i,r=0;r<n.length;r++)if(n[r].observer===this){i=n[r],i.removeListeners(),i.options=e;break}i||(i=new a(this,t,e),n.push(i),this.nodes_.push(t)),i.addListeners()},disconnect:function(){this.nodes_.forEach(function(t){t=h.get(t);for(var e=0;e<t.length;e++){var n=t[e];if(n.observer===this){n.removeListeners(),t.splice(e,1);break}}},this),this.records_=[]},takeRecords:function(){var t=this.records_;return this.records_=[],t}};var m,v;a.prototype={enqueue:function(t){var n=this.observer.records_,i=n.length;if(0<n.length){var r=n[i-1];if(r=r===t?r:!v||r!==v&&r!==m?null:v)return void(n[i-1]=r)}else _.push(this.observer),p||(p=!0,d(e));n[i]=t},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(t){var e=this.options;e.attributes&&t.addEventListener("DOMAttrModified",this,!0),e.characterData&&t.addEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.addEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(t){var e=this.options;e.attributes&&t.removeEventListener("DOMAttrModified",this,!0),e.characterData&&t.removeEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.removeEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(t){if(t!==this.target){this.addListeners_(t),this.transientObservedNodes.push(t);var e=h.get(t);e||h.set(t,e=[]),e.push(this)}},removeTransientObservers:function(){
var t=this.transientObservedNodes;this.transientObservedNodes=[],t.forEach(function(t){this.removeListeners_(t),t=h.get(t);for(var e=0;e<t.length;e++)if(t[e]===this){t.splice(e,1);break}},this)},handleEvent:function(t){switch(t.type){case"DOMAttrModified":var e=t.attrName,n=t.relatedNode.namespaceURI,r=t.target,a=m=new o("attributes",r);a.attributeName=e,a.attributeNamespace=n;var u=t.attrChange===MutationEvent.ADDITION?null:t.prevValue;i(r,function(t){return!t.attributes||t.attributeFilter&&t.attributeFilter.length&&-1===t.attributeFilter.indexOf(e)&&-1===t.attributeFilter.indexOf(n)?void 0:t.attributeOldValue?s(u):a});break;case"DOMCharacterDataModified":r=t.target,a=m=new o("characterData",r),u=t.prevValue,i(r,function(t){return t.characterData?t.characterDataOldValue?s(u):a:void 0});break;case"DOMNodeRemoved":this.addTransientObserver(t.target);case"DOMNodeInserted":var c,r=t.relatedNode,h=t.target;"DOMNodeInserted"===t.type?(t=[h],c=[]):(t=[],c=[h]);var d=h.previousSibling,h=h.nextSibling,a=m=new o("childList",r);a.addedNodes=t,a.removedNodes=c,a.previousSibling=d,a.nextSibling=h,i(r,function(t){return t.childList?a:void 0})}m=v=void 0}}}(t||(t={})),function(t){var e=function(){function e(e,n,i){void 0===i&&(i=function(t,e){}),this._ctx=e,this._blocker=n,this._visitor=i,this._sentDomSnapshot=!1,this._records=[],this._blockedDims={},this._wnd=e.getWindow(),this._encoder=new t.NodeEncoder(n)}return e.prototype.hookMutations=function(e){var n=this;void 0===e&&(e=this._wnd.document.documentElement),this._root=e,this._sentDomSnapshot=!1,this._lz=new t.LZJGWEncoder,this._observer=new t.MutationObserver(function(t){n._records=n._records.concat(t)}),this._observer.observe(e,{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0})},e.prototype.shutdown=function(){this._observer&&this._observer.disconnect();var e=t.mirrorFor(this._root);e&&t.clearIds(e),this._records=[]},e.prototype.processMutations=function(){if(!this._root)return[];var e=this._ctx.now(),n=[];if(this._sentDomSnapshot||(this.genInsert(e,n,null,this._root,null),this._sentDomSnapshot=!0),0==this._records.length)return n;var i={},r={};this.processRecords(e,n,r,i);for(var o in r){var s=o.split(":");n.push({Kind:t.EVENT_MUT_ATTR,When:e,Args:[parseInt(s[0]),s[1],r[o]]})}for(o in i)n.push({Kind:t.EVENT_MUT_TEXT,When:e,Args:[parseInt(o),i[o]]});return this._records=[],n},e.prototype.processRecords=function(e,n,i,r){for(var o={},s={},a=0;a<this._records.length;++a)try{var u=this._records[a],c=t.fsid(u.target);if(c)switch(o[c]=u.target,u.type){case"childList":if(0<u.removedNodes.length)for(var h=0;h<u.removedNodes.length;++h){var d=t.mirrorFor(u.removedNodes[h]);d&&d.id&&d.parent==t.mirrorFor(u.target)&&d.next==t.mirrorFor(u.nextSibling)&&this.genRemove(e,n,d)}c&&(s[c]=u.target);break;case"characterData":var l=u.target.textContent;u.oldValue!=l&&(t.isBlocked(u.target)||(r[c]=l));break;case"attributes":var f=u.attributeName;u.target.hasAttribute(f)?(l=u.target.getAttribute(f),u.oldValue!=l&&(l=this.rewriteAttr(u.target,f,l),null!==l&&(i[c+":"+f]=l))):i[c+":"+f]=null}}catch(p){}for(var _ in s)i=s[_],(r=t.mirrorFor(i))&&r.id&&this.diff(e,n,i,r.child,i.firstChild);for(_ in o)i=o[_],this.maybeAddPlaceholderResize(e,n,i)},e.prototype.diff=function(e,n,i,r,o){for(var s=[];r&&o;){var a=t.mirrorFor(o);t.fsid(o)?r.id==a.id?(r=r.next,o=o.nextSibling):(s.push({remove:r}),r=r.next):(s.push({insert:[i,o,r.node]}),o=o.nextSibling)}for(;r;r=r.next)s.push({remove:r});for(;o;o=o.nextSibling)s.push({insert:[i,o,null]});for(i=0;i<s.length;i++)r=s[i],r.insert?this.genInsert(e,n,r.insert[0],r.insert[1],r.insert[2]):r.remove&&this.genRemove(e,n,r.remove)},e.prototype.maybeAddPlaceholderResize=function(e,n,i){try{for(;i&&!t.fsid(i);)i=i.parentNode;if(i&&t.isBlocked(i)){var r=i.getBoundingClientRect(),o=Math.floor(r.width),s=Math.floor(r.height),a=t.fsid(i),u=this._blockedDims[a];u&&u.w==o&&u.h==s||(this._blockedDims[a]={w:o,h:s},n.push({When:e,Kind:t.EVENT_PLACEHOLDER_SIZE,Args:[a,o,s]}))}}catch(c){}},e.prototype.genInsert=function(e,n,i,r,o){var s=this;if(i&&t.isBlocked(i))return null;var a=t.fsid(i)||-1,u=t.fsid(o)||-1,c=[];for(i=this._encoder.tokenizeNode(i,o,r,function(t,n){n?c.push(t):s._visitor(e,t)}),0<i.length&&n.push({When:e,Kind:t.EVENT_MUT_INSERT,Args:[a,u,this._lz.encode(i)]}),a=0;a<c.length;a++)this.maybeAddPlaceholderResize(e,n,c[a])},e.prototype.genRemove=function(e,n,i){var r=i.id;return t.removeMirror(i),0<n.length&&(i=n[n.length-1],i.Kind==t.EVENT_MUT_REMOVE)?void i.Args.push(r):void n.push({When:e,Kind:t.EVENT_MUT_REMOVE,Args:[r]})},e.prototype.rewriteAttr=function(e,n,i){return t.isBlocked(e)&&(i=t.rewriteBlockedAttribute(e,n,i,this._blocker)),i},e}();t.MutationWatcher=e}(t||(t={})),function(t){t.gatherPerformanceStats=function(){for(var t="connectEnd connectStart domComplete domContentLoadedEventEnd domContentLoadedEventStart domInteractive domLoading domainLookupEnd domainLookupStart fetchStart loadEventEnd loadEventStart navigationStart redirectEnd redirectStart requestStart responseEnd responseStart secureConnectionStart unloadEventEnd unloadEventStart".split(" "),e=[],n=0;n<t.length;n++){var i=performance.timing[t[n]],i=void 0==i?-1:i;e.push(i)}return e}}(t||(t={})),function(t){var e=function(){function e(e,n,i,r){var o=this;this._ctx=e,this._queue=n,this._blocker=i,this._onFrameCreated=r,this._clientHeight=this._clientWidth=this._curWindowScrollY=this._curWindowScrollX=-1,this._curInnerWidth=0,this._scrollTimeouts={},this._quirks=!1,this._listeners=new t.DomListeners,this._initialized=!1,this._wnd=e.getWindow(),this._doc=this._wnd.document,this._loc=this._wnd.location,this._hst=this._wnd.history,this._quirks="BackCompat"==this._doc.compatMode,this._currentUrl=this._loc.href,this._inputWatcher=new t.InputWatcher(function(t){o.addChangeElem(t)},function(e){return!!t.fsid(e)}),this._mutWatcher=new t.MutationWatcher(e,i,function(t,e){o.visitNode(t,e)})}return e.prototype.onDomLoad=function(){var e=this;this.addPerformanceData(),this.addDomLoaded(),this.addResize(),this._mutWatcher.hookMutations(),this._inputWatcher.hookEvents(),this._scrollListener=this._listeners.add(this.docElem(),"scroll",!0,function(t){e.addScroll(t)}),this._listeners.add(this._wnd,"mousemove",!0,function(t){e.addMouseMove(t)}),this._listeners.add(this._wnd,"mousedown",!0,function(t){e.addMouseDown(t)}),this._listeners.add(this._wnd,"mouseup",!0,function(t){e.addMouseUp(t)}),this._listeners.add(this._wnd,"keydown",!0,function(t){e.addKeyDown(t)}),this._listeners.add(this._wnd,"keyup",!0,function(t){e.addKeyUp(t)}),this._listeners.add(this._wnd,"click",!0,function(t){e.addClick(t)}),this._listeners.add(this._wnd,"dblclick",!0,function(t){e.addDblClick(t)}),this._listeners.add(this._wnd,"focus",!0,function(t){e.addFocus(t)}),this._listeners.add(this._wnd,"blur",!0,function(t){e.addBlur(t)}),this._listeners.add(this._wnd,"change",!0,function(t){e.addChange(t)}),this._listeners.add(this._wnd,"touchstart",!0,function(n){e.addTouchEvent(n,t.EVENT_TOUCHSTART),e.addWindowScroll()}),this._listeners.add(this._wnd,"touchend",!0,function(n){e.addTouchEvent(n,t.EVENT_TOUCHEND),e.addWindowScroll()}),this._listeners.add(this._wnd,"touchmove",!0,function(n){e.addTouchEvent(n,t.EVENT_TOUCHMOVE),e.addWindowScroll()}),this._listeners.add(this._wnd,"touchcancel",!0,function(n){e.addTouchEvent(n,t.EVENT_TOUCHCANCEL)}),this._listeners.add(this._wnd,"play",!0,function(n){e.addPlayPauseEvent(n,t.EVENT_PLAY)}),this._listeners.add(this._wnd,"pause",!0,function(n){e.addPlayPauseEvent(n,t.EVENT_PAUSE)}),this._listeners.add(this._wnd,"scroll",!1,function(t){e.addWindowScroll()}),this._listeners.add(this._wnd,"resize",!1,function(t){e.addResize()}),this._listeners.add(this._wnd,"submit",!1,function(t){e.addFormSubmit(t)}),this._listeners.add(this._wnd,"focus",!1,function(t){e.addWindowFocus(t)}),this._listeners.add(this._wnd,"blur",!1,function(t){e.addWindowBlur(t)}),this._listeners.add(this._wnd,"popstate",!1,function(){e.addNavigate()}),this._hst.pushState&&(this._pushHook=t.activateHook(this._hst,"pushState").afterSync(function(){return e.addNavigate()}),this._replaceHook=t.activateHook(this._hst,"replaceState").afterSync(function(){return e.addNavigate()}));var n=this._wnd.navigator.userAgent;-1<n.indexOf("MSIE ")||-1<n.indexOf("Trident/")||-1<n.indexOf("Edge/")||this.shimDocumentWrite(),this._initialized=!0},e.prototype.unShimDocumentWrite=function(){this._docOpenHook&&this._docOpenHook.disable(),this._docWriteHook&&this._docWriteHook.disable(),this._docWritelnHook&&this._docWritelnHook.disable(),this._docCloseHook&&this._docCloseHook.disable()},e.prototype.shimDocumentWrite=function(){var e=this,n=this._mutWatcher,i=function(i,r){var o=t.mirrorFor(i);if(o){var s=[];n.genRemove(r,s,o),o=s[0],e._queue.enqueueAt(o.When,o.Kind,o.Args)}},r=function(t){t.oldEl=this.documentElement,t.now=e._ctx.now()},o=function(r){if(this.documentElement!=r.oldEl){n.hookMutations();var o=[];for(i(r.oldEl,r.now),o.push({Kind:t.EVENT_SET_FRAME_BASE,When:r.now,Args:[t.baseUri(this),t.doctypeString(this)]},{Kind:t.EVENT_DOMLOADED,When:r.now,Args:[]}),e._listeners.remove(e._scrollListener),e._scrollListener=e._listeners.add(e.docElem(),"scroll",!0,function(t){e.addScroll(t)}),o.push.apply(o,n.processMutations()),r=0;r<o.length;r++){var s=o[r];e._queue.enqueueAt(s.When,s.Kind,s.Args)}}};this._docOpenHook=t.activateHook(this._wnd.document,"open").before(r).afterSync(function(t){!this.documentElement&&t.oldEl&&i(t.oldEl,t.now)}),this._docWriteHook=t.activateHook(this._wnd.document,"write").before(r).afterAsync(o),this._docWritelnHook=t.activateHook(this._wnd.document,"writeln").before(r).afterAsync(o),this._docCloseHook=t.activateHook(this._wnd.document,"close").before(r).afterAsync(o)},e.prototype.onLoad=function(){this.addLoad(),0!=this._clientWidth&&0!=this._clientHeight||this.addResize()},e.prototype.bundleEvents=function(){return this._inputWatcher.tick(),this.addWindowInnerWidth(),this._mutWatcher.processMutations()},e.prototype.shutdown=function(){this._initialized&&(this._initialized=!1,this._listeners.clear(),this._pushHook&&this._pushHook.disable(),this._replaceHook&&this._replaceHook.disable(),this._inputWatcher.shutdown(),this._mutWatcher.shutdown(),this.unShimDocumentWrite())},e.prototype.docElem=function(){return this._doc.documentElement},e.prototype.visitNode=function(e,n){switch(n.nodeName){case"INPUT":case"TEXTAREA":case"SELECT":this._inputWatcher.addInput(n);break;case"FRAME":case"IFRAME":this._onFrameCreated(n);break;case"VIDEO":case"AUDIO":n.paused||this.addPlayPauseEventById(t.fsid(n),t.EVENT_PLAY)}},e.prototype.addMouseMove=function(e){e=t.fsid(e.target)?[e.clientX,e.clientY,t.fsid(e.target)]:[e.clientX,e.clientY],this._queue.enqueue(t.EVENT_MOUSEMOVE,e)},e.prototype.addMouseDown=function(e){this._queue.enqueue(t.EVENT_MOUSEDOWN,[e.clientX,e.clientY])},e.prototype.addMouseUp=function(e){this._queue.enqueue(t.EVENT_MOUSEUP,[e.clientX,e.clientY])},e.prototype.addTouchEvent=function(t,e){if(void 0!==t.changedTouches)for(var n=0;n<t.changedTouches.length;++n){var i=t.changedTouches[n];isNaN(parseInt(i.identifier))&&(i.identifier=0),this._queue.enqueue(e,[i.identifier,i.clientX,i.clientY])}},e.prototype.addPlayPauseEvent=function(e,n){var i=t.fsid(e.target);i&&this.addPlayPauseEventById(i,n)},e.prototype.addPlayPauseEventById=function(t,e){this._queue.enqueue(e,[t])},e.prototype.addWindowFocus=function(e){this._queue.enqueue(t.EVENT_WINDOW_FOCUS,[])},e.prototype.addWindowBlur=function(e){this._queue.enqueue(t.EVENT_WINDOW_BLUR,[])},e.prototype.maybeAddValueChange=function(){var t=this._doc.activeElement;t&&this._inputWatcher.invokeGlobalOnChange(t)},e.prototype.addKeyDown=function(e){var n=this._doc.activeElement;(!n||t.fsidIfNotBlocked(n))&&(this.maybeAddValueChange(),this._queue.enqueue(t.EVENT_KEYDOWN,[e.keyCode]))},e.prototype.addKeyUp=function(e){var n=this._doc.activeElement;(!n||t.fsidIfNotBlocked(n))&&(this.maybeAddValueChange(),this._queue.enqueue(t.EVENT_KEYUP,[e.keyCode]))},e.prototype.addWindowInnerWidth=function(){var e=this._wnd.innerWidth;e!=this._curInnerWidth&&(this._queue.enqueue(t.EVENT_INNERWIDTH,[e]),this._curInnerWidth=e)},e.prototype.doWorkInScrollTimeout=function(e,n){var i=this;e in this._scrollTimeouts||(this._scrollTimeouts[e]=n,setTimeout(function(){if(e in i._scrollTimeouts){var t=i._scrollTimeouts[e];delete i._scrollTimeouts[e],t()}},t.ScrollSampleInterval))},e.prototype._fireScrollTimeouts=function(){for(var t in this._scrollTimeouts)this._scrollTimeouts[t](),delete this._scrollTimeouts[t];this._scrollTimeouts=[]},e.prototype.addWindowScroll=function(){var e=this,n=t.fsid(this._doc.body);n&&this.doWorkInScrollTimeout(n,function(){var i,r;"pageXOffset"in e._wnd?(i=e._wnd.pageXOffset,r=e._wnd.pageYOffset):(i=e._doc.body.scrollLeft,r=e._doc.body.scrollTop),(i!=e._curWindowScrollX||r!=e._curWindowScrollY)&&(e._queue.enqueue(t.EVENT_SCROLL,[n,i,r]),e._curWindowScrollX=i,e._curWindowScrollY=r),e.addWindowInnerWidth()})},e.prototype.addScroll=function(e){var n=this,i=e.target,r=t.fsid(i);r&&this.doWorkInScrollTimeout(r,function(){n._queue.enqueue(t.EVENT_SCROLL,[r,i.scrollLeft,i.scrollTop])})},e.prototype.addResize=function(){var e,n;this._quirks?(e=this._doc.body.clientWidth,n=this._doc.body.clientHeight):(e=this.docElem().clientWidth,n=this.docElem().clientHeight),(e!=this._clientWidth||n!=this._clientHeight)&&(this._clientWidth=e,this._clientHeight=n,e=Math.max(this._wnd.innerWidth||-1,this._clientWidth),this.isMediaValue("width",e)||(e=this.findMediaValue("width",e,e+128)||e),n=Math.max(this._wnd.innerHeight,this._clientHeight),this.isMediaValue("height",n)||(n=this.findMediaValue("height",n,n+128)||n),e==this._clientWidth&&n==this._clientHeight?this._queue.enqueue(t.EVENT_RESIZE,[this._clientWidth,this._clientHeight]):this._queue.enqueue(t.EVENT_RESIZE,[this._clientWidth,this._clientHeight,e,n]))},e.prototype.isMediaValue=function(t,e){return this._wnd.matchMedia?this._wnd.matchMedia("(min-"+t+": "+e+"px)").matches&&this._wnd.matchMedia("(max-"+t+": "+e+"px)").matches:!0},e.prototype.findMediaValue=function(t,e,n){if(!this._wnd.matchMedia)return 0;for(;n>e;){var i=Math.floor((e+n)/2);if(this._wnd.matchMedia("(min-"+t+": "+i+"px)").matches){if(this._wnd.matchMedia("(max-"+t+": "+i+"px)").matches)return i;e=i+1}else n=i-1}return 0},e.prototype.addDomLoaded=function(){this._queue.enqueue(t.EVENT_DOMLOADED,[])},e.prototype.addLoad=function(){this._queue.enqueue(t.EVENT_LOAD,[])},e.prototype.addPerformanceData=function(){window.performance&&this._queue.enqueue(t.NAVIGATION_TIMING,t.gatherPerformanceStats())},e.prototype.addNavigate=function(){var e=this._loc.href;this._currentUrl!=e&&(this._currentUrl=e,this._queue.enqueue(t.EVENT_NAVIGATE,[this._loc.href,this._doc.title]))},e.prototype.addClick=function(e){var n=e.target,i=t.fsid(n);i&&(n=n.getBoundingClientRect(),this._queue.enqueue(t.EVENT_CLICK,[i,e.clientX,e.clientY,n.left,n.top,n.width,n.height]))},e.prototype.addDblClick=function(e){(e=t.fsid(e.target))&&this._queue.enqueue(t.EVENT_DBL_CLICK,[e])},e.prototype.addFormSubmit=function(e){(e=t.fsid(e.target))&&this._queue.enqueue(t.EVENT_FORM_SUBMIT,[e])},e.prototype.addFocus=function(e){(e=t.fsid(e.target))&&this._queue.enqueue(t.EVENT_FOCUS,[e])},e.prototype.addBlur=function(e){(e=t.fsid(e.target))&&this._queue.enqueue(t.EVENT_BLUR,[e])},e.prototype.addChange=function(t){this._inputWatcher.invokeGlobalOnChange(t.target)},e.prototype.addChangeElem=function(e){var n=t.fsidIfNotBlocked(e);n&&this._queue.enqueue(t.EVENT_VALUECHANGE,[n,t.valueOfInputishElem(e)])},e}();t.EventWatcher=e}(t||(t={})),function(t){function e(e){try{var n=t.parseJson(e);if("__fs"in n)return n.__fs}catch(i){}return[]}function n(t){var e=t.src;return!t.hasAttribute("src")||"about:blank"==e||0==e.indexOf("javascript:")||0==e.indexOf(i)}t.FS_REQUEST_FRAME_ID="RequestFrameId",t.FS_SET_FRAME_ID_CMD="SetFrameId",t.FS_IFRAME_EVENTS="EvtBundle",t.FS_SHUTDOWN_FRAME="ShutdownFrame",t.FS_RESTART_FRAME="RestartFrame";var i=location.protocol+"//"+location.host;t.defaultInjector=function(e,n,i,r){t.logIfDebug("Injecting into Frame ["+e.src+"]");try{if(e.src&&"about:blank"!=e.src&&0>e.src.indexOf("javascript:")&&e.src!=e.contentWindow.location.href)t.logIfDebug("Frame not yet loaded: "+e.src);else if(e.contentWindow[t.Namespace(e.contentWindow)])t.logIfDebug("FS already defined in Frame contentWindow: "+e.src+". Ignoring.");else{var o=e.contentWindow,s=e.contentDocument;o._fs_org=n,o._fs_host=i,o._fs_debug=t.isDebug(),o._fs_run_in_iframe=!0;var a=s.createElement("script");a.async=!0,a.src=r+"//"+i+"/s/fs.js",s.head.appendChild(a)}}catch(u){t.logIfDebug("iFrame no injecty. Probably not same origin.")}},function(t){t[t.NoInfoYet=1]="NoInfoYet",t[t.Enabled=2]="Enabled",t[t.Disabled=3]="Disabled"}(t.GetCurrentSessionEnabledState||(t.GetCurrentSessionEnabledState={}));var o=t.GetCurrentSessionEnabledState,s=function(){function i(e,n,i,r){var o=this;this._ctx=e,this._injector=r,this._iFrames=[],this._pendingChildFrameIdInits=[],this._listeners=new t.DomListeners,this._blocker=new t.Blocker,this._transport=i(e,function(){o.shutdown()}),this._queue=new t.EventQueue(e,this._transport,function(){return o._eventWatcher.bundleEvents()},n),this._eventWatcher=new t.EventWatcher(e,this._queue,this._blocker,function(t){o.onFrameCreated(t)}),this._consoleWatcher=new t.ConsoleWatcher(this._queue,e.getWindow()),this._protocol=e.getProtocol(),this._host=e.getHost(),this._orgId=e.getOrgId(),this._identity=e.getIdentity(),this._wnd=e.getWindow()}return i.prototype.start=function(n){var i=this;this._onFullyStarted=n,this._blocker.addPredicateRule({Selector:function(t){return"object"!=t.tagName.toLowerCase()?!1:!(r.IMAGE_FILENAME.test(t.data)&&(void 0===t.type||0==t.type.lastIndexOf("image",0)))},Kind:t.NYI_KIND}),this._blocker.addRule({Selector:"embed",Kind:t.NYI_KIND}),this._blocker.addRule({Selector:"canvas",Kind:t.NYI_KIND}),this._blocker.addRule({Selector:"noscript",Kind:t.BLOCKED_KIND}),this._blocker.addRule({Selector:".fs-hide",Kind:t.HIDE_KIND}),this._consoleWatcher.enable(),"onpagehide"in this._wnd?this._listeners.add(this._wnd,"pagehide",!1,function(t){i._queue.addUnload()}):this._listeners.add(this._wnd,"unload",!1,function(t){i._queue.addUnload()}),this._listeners.add(this._wnd,"message",!1,function(t){"string"==typeof t.data&&i.postMessageReceived(t.source,e(t.data))})},i.prototype.getCurrentSessionEnabled=function(){return o.Disabled},i.prototype.queue=function(){return this._queue},i.prototype.eventWatcher=function(){return this._eventWatcher},i.prototype.console=function(){return this._consoleWatcher},i.prototype.onDomLoad=function(){this._eventWatcher.onDomLoad()},i.prototype.onLoad=function(){this._eventWatcher.onLoad()},i.prototype.shutdown=function(){this._queue.shutdown(),this._eventWatcher.shutdown(),this._consoleWatcher.disable(),this._listeners.clear(),this.tellAllFramesTo([t.FS_SHUTDOWN_FRAME])},i.prototype.tellAllFramesTo=function(e){for(var n=0;n<this._iFrames.length;n++){var i=this._iFrames[n].contentWindow;i&&i.postMessage&&i.postMessage(t.stringify({__fs:e}),"*")}},i.prototype.fullyStarted=function(){this._onFullyStarted()},i.prototype.flushPendingChildFrameInits=function(){if(0<this._pendingChildFrameIdInits.length){for(var t=0;t<this._pendingChildFrameIdInits.length;t++)this._pendingChildFrameIdInits[t]();this._pendingChildFrameIdInits=[]}},i.prototype.onFrameCreated=function(e){var i=this,r=t.fsid(e);r?(this._iFrames.push(e),n(e)?(t.logIfDebug("Attempting to setup Frame ["+e.src+"]"),this._injector(e,this._orgId,this._host,this._protocol),e.addEventListener("load",function(n){t.logIfDebug("onload for frame ["+e.src+"]"),i._injector(e,i._orgId,i._host,i._protocol)})):(t.logIfDebug("Frame Doesn't need injecting. Probably cross domain ["+e.src+"]"),e.contentWindow.postMessage&&(t.logIfDebug("Eagerly sending FrameId "+r+" to Frame ["+e.src+"]"),this.sendFrameIdToInnerFrame(e.contentWindow,r)))):t.logIfDebug("fsid missing or invalid for iFrame."+e.src)},i.prototype.postMessageReceived=function(e,n){switch(n[0]){case t.FS_IFRAME_EVENTS:var i=n[1];0<i.length&&this._transport.enqueueEvents(i);break;case t.FS_REQUEST_FRAME_ID:i=this.iFrameWndToFsId(e),e&&i?(t.logIfDebug("Responding to FID request for frame "+i),this.sendFrameIdToInnerFrame(e,i)):t.logIfDebug("No FrameId found. Hoping to send one later.")}},i.prototype.sendFrameIdToInnerFrame=function(e,n){var i=this,r=function(){var r=[];0!=i._frameId&&(r=i._parentIds?i._parentIds.concat(i._frameId):[i._frameId]),r=[t.FS_SET_FRAME_ID_CMD,n,r,i._ctx.startTime(),i._blocker.rawRules,i._identity.cookieData(),i._pageId],e&&e.postMessage&&e.postMessage(t.stringify({__fs:r}),"*")};null==this._frameId?this._pendingChildFrameIdInits.push(r):r()},i.prototype.iFrameWndToFsId=function(e){for(var n=0;n<this._iFrames.length;n++)if(this._iFrames[n].contentWindow==e)return t.fsid(this._iFrames[n]);return t.logIfDebug("Unable to locate frame for window"),NaN},i}();t.AbstractRecorder=s,t.parsePostMessageData=e}(t||(t={})),function(t){t.CompiledTimestamp=1494946966,t.CompiledVersion="UNSET"}(t||(t={}));var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};!function(t){function e(e,n){return new t.HttpEventTransport(e,n)}var n=function(n){function i(i,r,o,s,a){var u=this;void 0===r&&(r=t.RealTicker),void 0===o&&(o=new t.XHRPoster),void 0===s&&(s=e),void 0===a&&(a=t.defaultInjector),n.call(this,i,r,s,a),this._poster=o,this._domLoaded=!1,this._doc=this._wnd.document,this._frameId=0,this._getCurrentSessionEnabled=t.GetCurrentSessionEnabledState.NoInfoYet,t.set_fs_shutdown(this._wnd,function(t){u._queue.shutdown(),t&&(t=u._doc.getElementById(t))&&t.setAttribute("_fs_embed_token",u._embedToken)})}return o(i,n),i.prototype.getCurrentSessionEnabled=function(){return this._getCurrentSessionEnabled},i.prototype.onDomLoad=function(){n.prototype.onDomLoad.call(this),this._domLoaded=!0,this.injectIntegrationScript()},i.prototype.start=function(e){var i=this;n.prototype.start.call(this,e);var r=this._doc.documentElement;e=t._fs_replay_flags(this._wnd);var o=t.tryGetScreenDims(this._wnd),s=o[0],o=o[1],r={OrgId:this._identity.orgId(),UserId:this._identity.userId(),Url:location.href,Base:t.baseUri(this._doc),Width:r.clientWidth,Height:r.clientHeight,ScreenWidth:s,ScreenHeight:o,Referrer:this._doc.referrer,Doctype:t.doctypeString(this._doc),CompiledTimestamp:t.CompiledTimestamp};e&&(r.ReplayFlags=e),this._poster.post(this._protocol,this._host,"/rec/page",t.stringify(r),function(e){var n;try{n=t.parseJson(e)}catch(r){return void i.disableBecauseRecPageSaidSo()}if(i.handleResponse(n),e=t._fs_ready(i._wnd))try{e()}catch(o){t.logIfDebug("exception in _fs_ready(): "+o)}for(e=0;e<n.Blocks.length;++e)try{t.BlockRule.isComment(n.Blocks[e].Selector)||i._blocker.addRule(n.Blocks[e])}catch(s){t.logIfDebug("Unexpected error parsing block rule. Skipping "+n.Blocks[e])}i._queue.enqueueFirst(t.EVENT_SET_FRAME_BASE,[t.baseUri(i._doc),t.doctypeString(i._doc)]),i._queue.startPipeline(n.PageIntId),i.fullyStarted()},function(t){i.disableBecauseRecPageSaidSo()})},i.prototype.setIdsAndCookie=function(e){var n=this._identity;n.setIds(e.CookieDomain,e.UserIntId,e.SessionIntId),this._pageId=e.PageIntId,this._embedToken=e.EmbedToken,t.logIfDebug("/User,"+n.userId()+"/Session,"+n.sessionId()+"/Page,"+e.PageIntId)},i.prototype.injectIntegrationScript=function(){if(this._domLoaded&&this._integrationScript){var e=this._doc.createElement("script");t._fs_csp(this._wnd)?e.src=this._protocol+this._host+"/rec/integrations?OrgId="+this._orgId:e.text=this._integrationScript,e.async=!0,this._doc.head.appendChild(e)}},i.prototype.handleResponse=function(e){this.setIdsAndCookie(e),this._integrationScript=e.IntegrationScript,this._getCurrentSessionEnabled=e.GetCurrentSessionEnabled?t.GetCurrentSessionEnabledState.Enabled:t.GetCurrentSessionEnabledState.Disabled,this.injectIntegrationScript()},i.prototype.disableBecauseRecPageSaidSo=function(){this.shutdown(),t.logIfDebug("Disabling FS.");var e=t._fs_ready(this._wnd);if(e)try{e(!0)}catch(n){t.logIfDebug("exception in _fs_ready(): "+n)}},i}(t.AbstractRecorder);t.TopRecorder=n}(t||(t={})),function(t){function e(e,n){return new t.PostMessageEventTransport(e.getWindow())}t.makeFrameTransport=e;var n=function(n){function i(i,r,o,s,a){void 0===r&&(r=t.RealTicker),void 0===o&&(o=new t.PostMessagePoster),void 0===s&&(s=e),void 0===a&&(a=t.defaultInjector),n.call(this,i,r,s,a),this._messagePoster=o}return o(i,n),i.prototype.start=function(t){n.prototype.start.call(this,t),this.sendRequestForFrameId()},i.prototype.postMessageReceived=function(e,i){switch(n.prototype.postMessageReceived.call(this,e,i),i[0]){case t.FS_SET_FRAME_ID_CMD:try{this.setFrameIdFromOutside(i[1],i[2],i[3],i[4],i[5],i[6])}catch(r){t.logIfDebug("Failed to parse frameId from message"+i)}}},i.prototype.sendRequestForFrameId=function(){this._frameId||(0==this._frameId?t.logIfDebug("For some reason the outer window attempted to request a frameId"):(t.logIfDebug("Asking for a frame ID from within frame: "+location.href),this._messagePoster.postMessage(this._wnd.parent,t.FS_REQUEST_FRAME_ID,null)))},i.prototype.setFrameIdFromOutside=function(e,n,i,r,o,s){if(e)if(this._frameId)t.logIfDebug("frame Id is already set to "+this._frameId+". Received second request to set it to "+e+" Iframe:"+location.href);else{for(t.logIfDebug("FrameId received within frame "+location.href+": "+e),this._identity.initFromParsedCookie(o),this._frameId=e,this._parentIds=n,o=0;o<r.length;++o)this._blocker.addRule(r[o]);this._queue.enqueueFirst(t.EVENT_SET_FRAME_BASE,[t.baseUri(this._wnd.document),t.doctypeString(this._wnd.document)]),this._queue.rebaseIframe(i),this._ctx.setStartTime(i),this._pageId=s,this._queue.startPipeline(s,e,n),this.flushPendingChildFrameInits(),this.fullyStarted()}else t.logIfDebug("Outer page gave us a bogus frame Id! Iframe: "+location.href)},i}(t.AbstractRecorder);t.InnerRecorder=n}(t||(t={})),function(t){var e=function(){function e(){}return e.prototype.createTopRecorder=function(e){return new t.TopRecorder(e)},e.prototype.createInnerRecorder=function(e){return new t.InnerRecorder(e)},e}();t.DefaultRecorderMaker=e;var n=function(){function n(t,n){void 0===t&&(t=window),void 0===n&&(n=new e),this.wnd=t,this.recMaker=n,this.protocol="https:",this.domDoneLoaded=!1,this._startTime=this.wallTime(),this.splitPending=this.waitingOnStart=this.gotWindowScroll=!1,this.reidentifyCount=0}return n.prototype.init=function(){t.isLoaded(this.wnd)||(t.initWindex(this.wnd),t.setLoaded(this.wnd,t.Namespace(this.wnd)),this.initApi(),this.start())},n.prototype.wallTime=function(){return(new Date).getTime()},n.prototype.now=function(){return this.wallTime()-this._startTime},n.prototype.startTime=function(){return this._startTime},n.prototype.setStartTime=function(t){this._startTime=t},n.prototype.maybeAddInitialScroll=function(){!this.gotWindowScroll&&document.body&&t.fsid(document.body)&&(this.recorder.eventWatcher().addWindowScroll(),this.gotWindowScroll=!0)},n.prototype.getHost=function(){return this.host},n.prototype.getProtocol=function(){return this.protocol},n.prototype.getOrgId=function(){return this.orgId},n.prototype.getIdentity=function(){return this.identity},n.prototype.getVars=function(){return this.vars},n.prototype.getWindow=function(){return this.wnd},n.prototype.getCurrentSessionURL=function(e){var n=this.recorder.getCurrentSessionEnabled();return n==t.GetCurrentSessionEnabledState.NoInfoYet?null:n==t.GetCurrentSessionEnabledState.Disabled?this.protocol+"//"+this.identity.host()+"/opt/upgrade":(n=this.getCurrentSession())?(e&&(n+=":"+this.wallTime()),this.protocol+"//"+this.identity.host()+"/ui/"+this.identity.orgId()+"/session/"+encodeURIComponent(n)):null},n.prototype.getCurrentSession=function(){var e=this.recorder.getCurrentSessionEnabled();return e!=t.GetCurrentSessionEnabledState.NoInfoYet&&e!=t.GetCurrentSessionEnabledState.Disabled&&this.identity.userId()?this.identity.userId()+":"+this.identity.sessionId():null},n.prototype.enableConsole=function(){this.recorder.console().enable()},n.prototype.disableConsole=function(){this.recorder.console().disable()},n.prototype.log=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];"log"!==t&&"info"!==t&&"warn"!==t&&"error"!==t&&"debug"!==t&&(e.unshift(t),t="log"),this.recorder.console().addLog(t,e)},n.prototype.shutdown=function(){this.recorder?(this.recorder.shutdown(),this.recorder=null):t.logIfDebug("Recording already shut down.")},n.prototype.restart=function(){this.recorder?t.logIfDebug("Recording already started."):this.createRecorder(!0)},n.prototype.splitPage=function(t){this.waitingOnStart?this.splitPending=!0:(this.shutdown(),t&&this.identity.clear(),this.restart())},n.prototype._api=function(e,n){if(this.inFrame)t.logIfDebug("API calls may only be made from the top-most frame");else if(this.recorder){var i=this.vars.api(e,n),r=i[0];if(i[1]){if(8>this.reidentifyCount)return this.reidentifyCount++,t.FS_q_push(this.wnd,[e,n]),void this.splitPage(!0);t.logIfDebug("reidentified too many times; giving up")}for(i=0;i<r.length;i++)this.recorder.queue().enqueue(r[i].Kind,r[i].Args)}else t.FS_q_push(this.wnd,[e,n])},n.prototype._cookies=function(){return this.identity.cookies()},n.prototype._setCookie=function(t,e){return this.identity.setCookie(t,e)},n.prototype.initApi=function(){var e=this.wnd[t.Namespace(this.wnd)];e.getCurrentSessionURL=t.$entry(this.getCurrentSessionURL,this),e.getCurrentSession=t.$entry(this.getCurrentSession,this),e.enableConsole=t.$entry(this.enableConsole,this),e.disableConsole=t.$entry(this.disableConsole,this),e.log=t.$entry(this.log,this),e.shutdown=t.$entry(this.shutdown,this),e.restart=t.$entry(this.restart,this),e._api=t.$entry(this._api,this),e._cookies=t.$entry(this._cookies,this),e._setCookie=t.$entry(this._setCookie,this)},n.prototype.start=function(){var e=this;t.initDebug(this.wnd),t.logIfDebug("script version "+t.CompiledVersion+" (compiled at "+t.CompiledTimestamp+")"),this.host=t._fs_host(this.wnd),this.orgId=t._fs_org(this.wnd),this.host?this.orgId?(t.logIfDebug("host: "+this.host),t.logIfDebug("orgid: "+this.orgId),"localhost:8080"==this.host&&(this.protocol="http:"),this.canRecord(this.orgId)?(this.identity=new t.Identity,this.inFrame||(this.vars=new t.Vars(this.identity),this.identity.initFromCookies(this.host,this.orgId)),this.createRecorder(),this.hookLoadEvents(),this.wnd.addEventListener("message",function(n){if("string"==typeof n.data)switch(t.parsePostMessageData(n.data)[0]){case t.FS_SHUTDOWN_FRAME:e.shutdown();break;case t.FS_RESTART_FRAME:e.restart()}})):this.hailMary()):t.logIfDebug("Missing global _fs_org. Recording disabled."):t.logIfDebug("Missing global _fs_host. Recording disabled.")},n.prototype.createRecorder=function(e){var n=this;if(this._startTime=this.wallTime(),this.inFrame)this.recorder=this.recMaker.createInnerRecorder(this);else{this.recorder=this.recMaker.createTopRecorder(this);for(var i=this.vars.drainApiQueue(t.FS_q_drain(this.wnd)),r=0;r<i.length;r++)this.recorder.queue().enqueue(i[r].Kind,i[r].Args)}this.waitingOnStart=!0,this.recorder.start(function(){n.waitingOnStart=!1,e&&n.recorder.tellAllFramesTo([t.FS_RESTART_FRAME]),n.splitPending&&(n.splitPending=!1,n.splitPage())}),e&&(this.recorder.onDomLoad(),this.recorder.onLoad())},n.prototype.determineFrameness=function(e){var n=t._fs_transport(this.wnd);t._fs_is_outer_script(this.wnd)?this.inFrame=!1:this.wnd!=top?this.inFrame=!0:n?n.init&&n.init(e)&&(this.inFrame=!0):this.inFrame=!1},n.prototype.canRecord=function(e){return this.determineFrameness(e),this.wnd.MutationEvent&&this.wnd.postMessage?!this.inFrame||t._fs_run_in_iframe(this.wnd)||t._fs_transport(this.wnd)?!0:(t.logIfDebug("Fullstory recording for this page is NOT allowed within an iFrame."),!1):(t.logIfDebug("missing required browser features"),!1)},n.prototype.hailMary=function(){var e=this,n=document.documentElement,i=t._fs_replay_flags(this.wnd);t.logIfDebug("Unable to record playback stream.");var r=document.createElement("script");this.wnd.__fs_startResponse=function(t){e.identity.setIds(t.CookieDomain,t.UserIntId,t.SessionIntId),document.body.removeChild(r)},r.src="//"+this.identity.host()+"/rec/page?OrgId="+this.identity.orgId()+"&UserId="+this.identity.userId()+"&Url="+encodeURIComponent(location.href)+"&Base="+encodeURIComponent(t.baseUri(document))+"&Width="+n.clientWidth+"&Height="+n.clientHeight+"&ScreenWidth="+this.wnd.screen.width+"&ScreenHeight="+this.wnd.screen.height+"&Referrer="+encodeURIComponent(document.referrer)+"&Doctype="+encodeURIComponent(t.doctypeString(document))+"&Fallback=true"+(i?"&ReplayFlags="+i:""),
document.body.appendChild(r)},n.prototype.hookLoadEvents=function(){var t=this,e=function(){t.domDoneLoaded||(t.domDoneLoaded=!0,t.recorder.onDomLoad())},n=!1,i=function(){n||(n=!0,t.recorder.onLoad())};switch(document.readyState){case"interactive":document.attachEvent||e();break;case"complete":e(),i()}this.domDoneLoaded||document.addEventListener("DOMContentLoaded",function(t){e()}),n||this.wnd.addEventListener("load",function(t){e(),i()})},n}();t.GlobalContext=n}(t||(t={}));try{(new t.GlobalContext).init()}catch(s){t.sendToBugsnag(s,"error"),t._fs_debug(window)&&window.console&&console.log&&console.log("Failed to initialize FullStory.")}}();