var Workspace=Backbone.Router.extend({routes:{1:"fnOne",2:"fnTwo",3:"fnThree",4:"fnFourth",5:"fnFifth",6:"fnSixth"},fnOne:function(){enquiries.set("currentPage",1),$(".wrap").css("opacity","1"),$("#firstForm").removeClass("move-left"),$("#secondForm").removeClass("move-left"),$("#thirdForm").removeClass("move-left"),$("#fourthForm").removeClass("move-left"),$("#fifthForm").removeClass("move-left"),$("#sixthForm").removeClass("move-left"),form.setElement("#firstForm"),$("#secondForm").addClass("move-right"),$("#thirdForm").addClass("move-right"),$("#fourthForm").addClass("move-right"),$("#fifthForm").addClass("move-right"),$("#sixthForm").addClass("move-right")},fnTwo:function(){enquiries.set("currentPage",2),$("#secondForm").removeClass("move-right"),$("#secondForm").removeClass("move-left"),form.setElement("#secondForm"),$("#firstForm").addClass("move-left"),$("#thirdForm").addClass("move-right")},fnThree:function(){enquiries.set("currentPage",3),$("#thirdForm").removeClass("move-right"),$("#thirdForm").removeClass("move-left"),form.setElement("#thirdForm"),$("#secondForm").addClass("move-left"),$("#fourthForm").addClass("move-right")},fnFourth:function(){enquiries.set("currentPage",4),$("#fourthForm").removeClass("move-right"),$("#fourthForm").removeClass("move-left"),form.setElement("#fourthForm"),$("#thirdForm").addClass("move-left"),$("#fifthForm").addClass("move-right")},fnFifth:function(){enquiries.set("currentPage",5),$("#fifthForm").removeClass("move-right"),form.setElement("#fifthForm"),$("#fourthForm").addClass("move-left")},fnSixth:function(){enquiries.set("currentPage",6),$("#sixthForm").removeClass("move-right"),form.setElement("#sixthForm"),$("#fifthForm").addClass("move-left")}}),Enquiries=Backbone.Model.extend({defaults:{currentPage:1,clientName:"",email:"",projectBrief:"",budget:"",attachments:[],link:""}}),enquiries=new Enquiries;window.enquiries=enquiries;var FormView=Backbone.View.extend({el:$(".wrap"),events:{"click .back":"prevPage","click .next":"nextPage","click .skip":"sendPage","change input#files":"fileUpload","keyup .textField":"enterHandler"},model:enquiries,enterHandler:function(e){13==e.keyCode&&this.nextPage()},prevPage:function(){var e=this.model.get("currentPage");console.log(e-1),workspace.navigate(""+(e-1),{trigger:!0}),$(".group .message").animate({opacity:"+0"})},nextPage:function(){this.modelUpdate();var e=this.model.get("currentPage");console.log(e+1),this.shouldProceed()&&workspace.navigate(""+(e+1),{trigger:!0})},shouldProceed:function(){var e={1:function(){return enquiries.get("clientName")?($(".client").text(enquiries.get("clientName")),$(".group .message").animate({opacity:"+0"}),$("#clientName").css("border-color","#757575"),$(".group .cross-icon").hide(),!!enquiries.get("clientName")):($(".group .message").animate({opacity:"+1"}),$("#clientName").css("border-color","#db4344"),$(".group .cross-icon").show(),void 0)},2:function(){var e=/^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;console.log(enquiries.get("email"));var o=enquiries.get("email");return e.test(o)?($(".group .message").animate({opacity:"+0"}),$("#email").css("border-color","#757575"),$(".group .cross-icon").hide(),!!enquiries.get("email")):($(".group .message").animate({opacity:"+1"}),$(".group .cross-icon").show(),$("#email").css("border-color","#db4344"),void 0)},3:function(){var e=enquiries.get("projectBrief").length;return console.log(e),!0},4:function(){return enquiries.get("budget")?($(".group .message").animate({opacity:"+0"}),$("#budget").css("border-color","#757575"),$(".group .cross-icon").hide(),!!enquiries.get("budget")):($(".group .message").animate({opacity:"+1"}),$("#budget").css("border-color","#db4344"),$(".group .cross-icon").show(),void 0)},5:function(){return!0}},o=e[enquiries.get("currentPage").toString()]();return console.log("returning ",o),o},sendPage:function(){this.modelUpdate(),console.log(enquiries.attributes),$.post("http://205.186.143.136:5000/sendmail",enquiries.attributes).done(function(e){console.log("Response: ",e),alert("Message sent succesfully:"+e)})},modelUpdate:function(){enquiries.set(this.$el.find(".group input").attr("id"),this.$el.find(".group input").val())},fileUpload:function(e){console.log(e);var o=[];$.each(e.target.files,function(e,r){var t=new FileReader;t.onload=function(e){object={},object.path=e.target.result,console.log(object),o.push(object)},t.readAsDataURL(r)}),setTimeout(1e3,enquiries.set("attachments",o))}}),form=new FormView;window.workspace=new Workspace,Backbone.history.start(),workspace.navigate("1",{trigger:!0});